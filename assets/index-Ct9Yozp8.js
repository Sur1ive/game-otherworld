var Is=Object.defineProperty;var Ps=(e,t,n)=>t in e?Is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V=(e,t,n)=>Ps(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pi={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ri;function Rs(){if(Ri)return Pi;Ri=1;var e;return function(t){(function(n){var i=typeof globalThis=="object"?globalThis:typeof Ii=="object"?Ii:typeof self=="object"?self:typeof this=="object"?this:c(),r=s(t);typeof i.Reflect<"u"&&(r=s(i.Reflect,r)),n(r,i),typeof i.Reflect>"u"&&(i.Reflect=t);function s(h,d){return function(_,p){Object.defineProperty(h,_,{configurable:!0,writable:!0,value:p}),d&&d(_,p)}}function o(){try{return Function("return this;")()}catch{}}function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return o()||a()}})(function(n,i){var r=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",o=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",h={__proto__:[]}instanceof Array,d=!c&&!h,_={create:c?function(){return Pn(Object.create(null))}:h?function(){return Pn({__proto__:null})}:function(){return Pn({})},has:d?function(l,u){return r.call(l,u)}:function(l,u){return u in l},get:d?function(l,u){return r.call(l,u)?l[u]:void 0}:function(l,u){return l[u]}},p=Object.getPrototypeOf(Function),T=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:rn(),z=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ds(),M=typeof WeakMap=="function"?WeakMap:$s(),y=s?Symbol.for("@reflect-metadata:registry"):void 0,k=Me(),P=en(k);function I(l,u,f,v){if(x(f)){if(!Xe(l))throw new TypeError;if(!Qe(u))throw new TypeError;return Z(l,u)}else{if(!Xe(l))throw new TypeError;if(!F(u))throw new TypeError;if(!F(v)&&!x(v)&&!ft(v))throw new TypeError;return ft(v)&&(v=void 0),f=at(f),mt(l,u,f,v)}}n("decorate",I);function N(l,u){function f(v,D){if(!F(v))throw new TypeError;if(!x(D)&&!In(D))throw new TypeError;Tt(l,u,v,D)}return f}n("metadata",N);function O(l,u,f,v){if(!F(f))throw new TypeError;return x(v)||(v=at(v)),Tt(l,u,f,v)}n("defineMetadata",O);function $(l,u,f){if(!F(u))throw new TypeError;return x(f)||(f=at(f)),rt(l,u,f)}n("hasMetadata",$);function G(l,u,f){if(!F(u))throw new TypeError;return x(f)||(f=at(f)),R(l,u,f)}n("hasOwnMetadata",G);function j(l,u,f){if(!F(u))throw new TypeError;return x(f)||(f=at(f)),Y(l,u,f)}n("getMetadata",j);function q(l,u,f){if(!F(u))throw new TypeError;return x(f)||(f=at(f)),Yt(l,u,f)}n("getOwnMetadata",q);function K(l,u){if(!F(l))throw new TypeError;return x(u)||(u=at(u)),qt(l,u)}n("getMetadataKeys",K);function X(l,u){if(!F(l))throw new TypeError;return x(u)||(u=at(u)),ce(l,u)}n("getOwnMetadataKeys",X);function it(l,u,f){if(!F(u))throw new TypeError;if(x(f)||(f=at(f)),!F(u))throw new TypeError;x(f)||(f=at(f));var v=Rt(u,f,!1);return x(v)?!1:v.OrdinaryDeleteMetadata(l,u,f)}n("deleteMetadata",it);function Z(l,u){for(var f=l.length-1;f>=0;--f){var v=l[f],D=v(u);if(!x(D)&&!ft(D)){if(!Qe(D))throw new TypeError;u=D}}return u}function mt(l,u,f,v){for(var D=l.length-1;D>=0;--D){var Q=l[D],tt=Q(u,f,v);if(!x(tt)&&!ft(tt)){if(!F(tt))throw new TypeError;v=tt}}return v}function rt(l,u,f){var v=R(l,u,f);if(v)return!0;var D=fe(u);return ft(D)?!1:rt(l,D,f)}function R(l,u,f){var v=Rt(u,f,!1);return x(v)?!1:ue(v.OrdinaryHasOwnMetadata(l,u,f))}function Y(l,u,f){var v=R(l,u,f);if(v)return Yt(l,u,f);var D=fe(u);if(!ft(D))return Y(l,D,f)}function Yt(l,u,f){var v=Rt(u,f,!1);if(!x(v))return v.OrdinaryGetOwnMetadata(l,u,f)}function Tt(l,u,f,v){var D=Rt(f,v,!0);D.OrdinaryDefineOwnMetadata(l,u,f,v)}function qt(l,u){var f=ce(l,u),v=fe(l);if(v===null)return f;var D=qt(v,u);if(D.length<=0)return f;if(f.length<=0)return D;for(var Q=new z,tt=[],B=0,b=f;B<b.length;B++){var E=b[B],w=Q.has(E);w||(Q.add(E),tt.push(E))}for(var S=0,W=D;S<W.length;S++){var E=W[S],w=Q.has(E);w||(Q.add(E),tt.push(E))}return tt}function ce(l,u){var f=Rt(l,u,!1);return f?f.OrdinaryOwnMetadataKeys(l,u):[]}function Pt(l){if(l===null)return 1;switch(typeof l){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return l===null?1:6;default:return 6}}function x(l){return l===void 0}function ft(l){return l===null}function St(l){return typeof l=="symbol"}function F(l){return typeof l=="object"?l!==null:typeof l=="function"}function le(l,u){switch(Pt(l)){case 0:return l;case 1:return l;case 2:return l;case 3:return l;case 4:return l;case 5:return l}var f="string",v=$e(l,o);if(v!==void 0){var D=v.call(l,f);if(F(D))throw new TypeError;return D}return Nt(l)}function Nt(l,u){var f,v,D;{var Q=l.toString;if(Xt(Q)){var v=Q.call(l);if(!F(v))return v}var f=l.valueOf;if(Xt(f)){var v=f.call(l);if(!F(v))return v}}throw new TypeError}function ue(l){return!!l}function kn(l){return""+l}function at(l){var u=le(l);return St(u)?u:kn(u)}function Xe(l){return Array.isArray?Array.isArray(l):l instanceof Object?l instanceof Array:Object.prototype.toString.call(l)==="[object Array]"}function Xt(l){return typeof l=="function"}function Qe(l){return typeof l=="function"}function In(l){switch(Pt(l)){case 3:return!0;case 4:return!0;default:return!1}}function de(l,u){return l===u||l!==l&&u!==u}function $e(l,u){var f=l[u];if(f!=null){if(!Xt(f))throw new TypeError;return f}}function Je(l){var u=$e(l,a);if(!Xt(u))throw new TypeError;var f=u.call(l);if(!F(f))throw new TypeError;return f}function Ze(l){return l.value}function Ot(l){var u=l.next();return u.done?!1:u}function Qt(l){var u=l.return;u&&u.call(l)}function fe(l){var u=Object.getPrototypeOf(l);if(typeof l!="function"||l===p||u!==p)return u;var f=l.prototype,v=f&&Object.getPrototypeOf(f);if(v==null||v===Object.prototype)return u;var D=v.constructor;return typeof D!="function"||D===l?u:D}function tn(){var l;!x(y)&&typeof i.Reflect<"u"&&!(y in i.Reflect)&&typeof i.Reflect.defineMetadata=="function"&&(l=nn(i.Reflect));var u,f,v,D=new M,Q={registerProvider:tt,getProvider:b,setProvider:w};return Q;function tt(S){if(!Object.isExtensible(Q))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case l===S:break;case x(u):u=S;break;case u===S:break;case x(f):f=S;break;case f===S:break;default:v===void 0&&(v=new z),v.add(S);break}}function B(S,W){if(!x(u)){if(u.isProviderFor(S,W))return u;if(!x(f)){if(f.isProviderFor(S,W))return u;if(!x(v))for(var U=Je(v);;){var J=Ot(U);if(!J)return;var yt=Ze(J);if(yt.isProviderFor(S,W))return Qt(U),yt}}}if(!x(l)&&l.isProviderFor(S,W))return l}function b(S,W){var U=D.get(S),J;return x(U)||(J=U.get(W)),x(J)&&(J=B(S,W),x(J)||(x(U)&&(U=new T,D.set(S,U)),U.set(W,J))),J}function E(S){if(x(S))throw new TypeError;return u===S||f===S||!x(v)&&v.has(S)}function w(S,W,U){if(!E(U))throw new Error("Metadata provider not registered.");var J=b(S,W);if(J!==U){if(!x(J))return!1;var yt=D.get(S);x(yt)&&(yt=new T,D.set(S,yt)),yt.set(W,U)}return!0}}function Me(){var l;return!x(y)&&F(i.Reflect)&&Object.isExtensible(i.Reflect)&&(l=i.Reflect[y]),x(l)&&(l=tn()),!x(y)&&F(i.Reflect)&&Object.isExtensible(i.Reflect)&&Object.defineProperty(i.Reflect,y,{enumerable:!1,configurable:!1,writable:!1,value:l}),l}function en(l){var u=new M,f={isProviderFor:function(E,w){var S=u.get(E);return x(S)?!1:S.has(w)},OrdinaryDefineOwnMetadata:tt,OrdinaryHasOwnMetadata:D,OrdinaryGetOwnMetadata:Q,OrdinaryOwnMetadataKeys:B,OrdinaryDeleteMetadata:b};return k.registerProvider(f),f;function v(E,w,S){var W=u.get(E),U=!1;if(x(W)){if(!S)return;W=new T,u.set(E,W),U=!0}var J=W.get(w);if(x(J)){if(!S)return;if(J=new T,W.set(w,J),!l.setProvider(E,w,f))throw W.delete(w),U&&u.delete(E),new Error("Wrong provider for target.")}return J}function D(E,w,S){var W=v(w,S,!1);return x(W)?!1:ue(W.has(E))}function Q(E,w,S){var W=v(w,S,!1);if(!x(W))return W.get(E)}function tt(E,w,S,W){var U=v(S,W,!0);U.set(E,w)}function B(E,w){var S=[],W=v(E,w,!1);if(x(W))return S;for(var U=W.keys(),J=Je(U),yt=0;;){var ki=Ot(J);if(!ki)return S.length=yt,S;var Ms=Ze(ki);try{S[yt]=Ms}catch(ks){try{Qt(J)}finally{throw ks}}yt++}}function b(E,w,S){var W=v(w,S,!1);if(x(W)||!W.delete(E))return!1;if(W.size===0){var U=u.get(w);x(U)||(U.delete(S),U.size===0&&u.delete(U))}return!0}}function nn(l){var u=l.defineMetadata,f=l.hasOwnMetadata,v=l.getOwnMetadata,D=l.getOwnMetadataKeys,Q=l.deleteMetadata,tt=new M,B={isProviderFor:function(b,E){var w=tt.get(b);return!x(w)&&w.has(E)?!0:D(b,E).length?(x(w)&&(w=new z,tt.set(b,w)),w.add(E),!0):!1},OrdinaryDefineOwnMetadata:u,OrdinaryHasOwnMetadata:f,OrdinaryGetOwnMetadata:v,OrdinaryOwnMetadataKeys:D,OrdinaryDeleteMetadata:Q};return B}function Rt(l,u,f){var v=k.getProvider(l,u);if(!x(v))return v;if(f){if(k.setProvider(l,u,P))return P;throw new Error("Illegal state.")}}function rn(){var l={},u=[],f=function(){function B(b,E,w){this._index=0,this._keys=b,this._values=E,this._selector=w}return B.prototype["@@iterator"]=function(){return this},B.prototype[a]=function(){return this},B.prototype.next=function(){var b=this._index;if(b>=0&&b<this._keys.length){var E=this._selector(this._keys[b],this._values[b]);return b+1>=this._keys.length?(this._index=-1,this._keys=u,this._values=u):this._index++,{value:E,done:!1}}return{value:void 0,done:!0}},B.prototype.throw=function(b){throw this._index>=0&&(this._index=-1,this._keys=u,this._values=u),b},B.prototype.return=function(b){return this._index>=0&&(this._index=-1,this._keys=u,this._values=u),{value:b,done:!0}},B}(),v=function(){function B(){this._keys=[],this._values=[],this._cacheKey=l,this._cacheIndex=-2}return Object.defineProperty(B.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),B.prototype.has=function(b){return this._find(b,!1)>=0},B.prototype.get=function(b){var E=this._find(b,!1);return E>=0?this._values[E]:void 0},B.prototype.set=function(b,E){var w=this._find(b,!0);return this._values[w]=E,this},B.prototype.delete=function(b){var E=this._find(b,!1);if(E>=0){for(var w=this._keys.length,S=E+1;S<w;S++)this._keys[S-1]=this._keys[S],this._values[S-1]=this._values[S];return this._keys.length--,this._values.length--,de(b,this._cacheKey)&&(this._cacheKey=l,this._cacheIndex=-2),!0}return!1},B.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=l,this._cacheIndex=-2},B.prototype.keys=function(){return new f(this._keys,this._values,D)},B.prototype.values=function(){return new f(this._keys,this._values,Q)},B.prototype.entries=function(){return new f(this._keys,this._values,tt)},B.prototype["@@iterator"]=function(){return this.entries()},B.prototype[a]=function(){return this.entries()},B.prototype._find=function(b,E){if(!de(this._cacheKey,b)){this._cacheIndex=-1;for(var w=0;w<this._keys.length;w++)if(de(this._keys[w],b)){this._cacheIndex=w;break}}return this._cacheIndex<0&&E&&(this._cacheIndex=this._keys.length,this._keys.push(b),this._values.push(void 0)),this._cacheIndex},B}();return v;function D(B,b){return B}function Q(B,b){return b}function tt(B,b){return[B,b]}}function Ds(){var l=function(){function u(){this._map=new T}return Object.defineProperty(u.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),u.prototype.has=function(f){return this._map.has(f)},u.prototype.add=function(f){return this._map.set(f,f),this},u.prototype.delete=function(f){return this._map.delete(f)},u.prototype.clear=function(){this._map.clear()},u.prototype.keys=function(){return this._map.keys()},u.prototype.values=function(){return this._map.keys()},u.prototype.entries=function(){return this._map.entries()},u.prototype["@@iterator"]=function(){return this.keys()},u.prototype[a]=function(){return this.keys()},u}();return l}function $s(){var l=16,u=_.create(),f=v();return function(){function b(){this._key=v()}return b.prototype.has=function(E){var w=D(E,!1);return w!==void 0?_.has(w,this._key):!1},b.prototype.get=function(E){var w=D(E,!1);return w!==void 0?_.get(w,this._key):void 0},b.prototype.set=function(E,w){var S=D(E,!0);return S[this._key]=w,this},b.prototype.delete=function(E){var w=D(E,!1);return w!==void 0?delete w[this._key]:!1},b.prototype.clear=function(){this._key=v()},b}();function v(){var b;do b="@@WeakMap@@"+B();while(_.has(u,b));return u[b]=!0,b}function D(b,E){if(!r.call(b,f)){if(!E)return;Object.defineProperty(b,f,{value:_.create()})}return b[f]}function Q(b,E){for(var w=0;w<E;++w)b[w]=Math.random()*255|0;return b}function tt(b){if(typeof Uint8Array=="function"){var E=new Uint8Array(b);return typeof crypto<"u"?crypto.getRandomValues(E):typeof msCrypto<"u"?msCrypto.getRandomValues(E):Q(E,b),E}return Q(new Array(b),b)}function B(){var b=tt(l);b[6]=b[6]&79|64,b[8]=b[8]&191|128;for(var E="",w=0;w<l;++w){var S=b[w];(w===4||w===6||w===8)&&(E+="-"),S<16&&(E+="0"),E+=S.toString(16).toLowerCase()}return E}}function Pn(l){return l.__=void 0,delete l.__,l}})}(e||(e={})),Pi}Rs();var L=(e=>(e[e.Common=0]="Common",e[e.Rare=1]="Rare",e[e.Epic=2]="Epic",e[e.Legendary=3]="Legendary",e[e.Unique=4]="Unique",e))(L||{}),ee=(e=>(e.Consumable="Consumable",e.Equipment="Equipment",e))(ee||{}),ei=(e=>(e.None="",e.Big="巨大的",e.Smelly="野兽先辈的",e))(ei||{}),Ht=(e=>(e.Head="head",e.Body="body",e.Hand="hand",e.Foot="foot",e.Accessory="accessory",e))(Ht||{}),m=(e=>(e.Attack="Attack",e.Defend="Defend",e.Dodge="Dodge",e.Capture="Capture",e.Special="Special",e.None="None",e))(m||{}),Or=(e=>(e.Poison="poison",e.Sleep="sleep",e.Stun="stun",e.Confuse="confuse",e.Paralyze="paralyze",e.Pain="pain",e))(Or||{});function js(e,t){if(!(e instanceof ye))return;if(t.health<1){e.addLog(`${t.name}已经死了，无法捕获`);return}const n=e.ability.dex/t.ability.dex*(e.ability.siz/t.ability.siz)/(10*t.health/t.maxHealth),i=e.ability.str/t.ability.str*(e.ability.siz/t.ability.siz)/(10*t.health/t.maxHealth);Math.random()<i&&Math.random()<n?(t.health=.9,e.capturedMonster.push(t),e.addLog(`你成功捕获了${t.name}`)):e.addLog(`你尝试捕获${t.name}，但是失败了`)}var A=(e=>(e.Dazed="Dazed",e.Attack="Attack",e.PowerAttack="PowerAttack",e.QuickAttack="QuickAttack",e.PowerfulDigAttack="PowerfulDigAttack",e.Yarimasune="Yarimasune",e.SleepyTea="SleepyTea",e.Repent="Repent",e.HorizontalSlash="HorizontalSlash",e.Bite="Bite",e.Capture="Capture",e.Stun="Stun",e.Defend="Defend",e.Dodge="Dodge",e.DragonBreath="DragonBreath",e.SpinAttack="SpinAttack",e.DefenseSlash="DefenseSlash",e.Counter="Counter",e.GodStrike="GodStrike",e.ShredFlower="ShredFlower",e.PsyKick="PsyKick",e.PsyExplosion="PsyExplosion",e.PsyInvisibleSword="PsyInvisibleSword",e.PsyDodge="PsyDodge",e))(A||{});const sn={category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 来不及反应`},ni={Dazed:{name:"反应不过来",description:"来不及反应",rarity:L.Common,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 来不及反应`}]},Stun:{name:"眩晕",description:"眩晕",rarity:L.Common,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 眩晕了`}]},Attack:{name:"攻击",description:"用拳头或者用武器进行一般通过攻击",rarity:L.Common,hits:[{category:m.Attack,coeff:{str:1,int:0,con:0,siz:.5,app:0,dex:.5},messageGenerator:(e,t)=>`${e.name}攻击了${t.name}`}]},PowerAttack:{name:"强力攻击",description:"全身力量集中于一点，进行一次强力的攻击",rarity:L.Rare,hits:[{category:m.Attack,coeff:{str:2,int:0,con:0,siz:.5,app:0,dex:.5},messageGenerator:(e,t)=>`${e.name}对${t.name}发起了一次强力的攻击`}]},QuickAttack:{name:"迅击",description:"据说剑圣在一个呼吸间就能劈出数刀。虽然你不是剑圣，但你努努力也至少能劈出两刀",rarity:L.Rare,hits:[{category:m.Attack,coeff:{str:.5,int:0,con:0,siz:0,app:0,dex:1},messageGenerator:(e,t)=>`${e.name}以迅雷不及掩耳之势向${t.name}发起了攻势`},{category:m.Attack,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:1},messageGenerator:(e,t)=>`电光火石之间，${e.name}再次做出了攻击`}]},PowerfulDigAttack:{name:"撅",description:"撅是对知识的渴求。古往今来多少哲学家撅地三尺探求真理",rarity:L.Epic,hits:[{category:m.Attack,coeff:{str:4,int:0,con:0,siz:2,app:0,dex:0},extraEffect:(e,t)=>{t.status.push({type:Or.Pain,duration:10})},messageGenerator:(e,t)=>`${e.name}撅了${t.name}，${t.name}痛苦难耐
// 哼哼啊啊啊啊啊啊啊啊啊啊 `}]},SleepyTea:{name:"饮用昏睡红茶",description:"诗人都喜欢饮酒作赋，古代的哲学家也是如此，只是彼时还没有酒",rarity:L.Legendary,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name}喝下了昏睡红茶，进入睡眠`},{category:m.Attack,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name}喝下了昏睡红茶，于睡眠中恢复了<span style="color: green">${e.getAbility().con}</span>点生命值`,extraEffect:(e,t)=>{e.health=Math.min(e.health+e.getAbility().con,e.maxHealth)}}]},Yarimasune:{name:"这个可以有！(赞赏)",description:"丝毫不吝啬对敌人的赞赏，这就是野兽先辈的气量",rarity:L.Rare,hits:[{category:m.Defend,coeff:{str:.5,int:0,con:1,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 进行了防御`},{category:m.Attack,coeff:{str:.5,int:0,con:0,siz:0,app:0,dex:1},messageGenerator:(e,t)=>`${e.name} 进行了反击`}]},Repent:{name:"†你改悔罢†",description:"令敌人改悔的神圣攻击",rarity:L.Epic,hits:[{category:m.Dodge,coeff:{str:0,int:0,con:0,siz:-1.5,app:0,dex:2.5},messageGenerator:(e,t)=>`${e.name} 进行了闪躲`},{category:m.Attack,coeff:{str:2,int:0,con:0,siz:0,app:0,dex:2},messageGenerator:(e,t)=>`${e.name}曰: †你改悔罢†`}]},HorizontalSlash:{name:"横劈",description:"以迅猛之势横向劈出一刀",rarity:L.Epic,hits:[{category:m.Attack,coeff:{str:2,int:0,con:0,siz:0,app:0,dex:2},messageGenerator:(e,t)=>`${e.name}以迅猛之势横向劈出一刀`}]},Bite:{name:"撕咬",description:"野兽的原始攻击方式",rarity:L.Common,hits:[{category:m.Attack,coeff:{str:1,int:0,con:0,siz:.5,app:0,dex:1},messageGenerator:(e,t)=>`${e.name}冲过来咬了${t.name}一口`}]},Capture:{name:"尝试捕捉",description:"这不是神奇宝贝，你得用绞技而不是精灵球",rarity:L.Common,hits:[{category:m.Capture,coeff:{str:.5,int:0,con:0,siz:0,app:0,dex:.5},extraEffect:js,messageGenerator:(e,t)=>`${e.name}尝试通过绞住${t.name}，让${t.name}失去行动力`}]},Defend:{name:"格挡",description:"做一个稳重的人",rarity:L.Common,hits:[{category:m.Defend,coeff:{str:1,int:0,con:1,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 进行了防御`}]},Counter:{name:"反击",description:"格挡后乘势反击",rarity:L.Rare,hits:[{category:m.Defend,coeff:{str:.5,int:0,con:1,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 进行了防御`},{category:m.Attack,coeff:{str:.5,int:0,con:0,siz:0,app:0,dex:1},messageGenerator:(e,t)=>`${e.name} 进行了反击`}]},DefenseSlash:{name:"防御斩",description:"快速挥刀后立刻进行防御，不给敌人任何可乘之机",rarity:L.Rare,hits:[{category:m.Attack,coeff:{str:.5,int:0,con:0,siz:0,app:0,dex:1},messageGenerator:(e,t)=>`${e.name} 进行了一次快速攻击`},{category:m.Defend,coeff:{str:1.5,int:0,con:1.5,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 进行了铁壁一般的防御`}]},Dodge:{name:"闪避",description:"天下武功，唯快不破。若是能闪过敌人的攻击，将使敌人失衡，失去下一个动作",rarity:L.Common,hits:[{category:m.Dodge,coeff:{str:0,int:0,con:0,siz:-1.5,app:0,dex:3},messageGenerator:(e,t)=>`${e.name} 对 ${t.name} 的攻击进行了闪躲`}]},PsyDodge:{name:"瞬移",description:"念力的一种用法",rarity:L.Legendary,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.Dodge,coeff:{str:0,int:12,con:0,siz:0,app:0,dex:3},messageGenerator:(e,t)=>`${e.name} 的身影瞬间到了别处`}]},SpinAttack:{name:"回旋击",description:"闪避后趁敌人重心不稳发起攻击",rarity:L.Rare,hits:[{category:m.Dodge,coeff:{str:0,int:0,con:0,siz:-1.5,app:0,dex:2.5},messageGenerator:(e,t)=>`${e.name} 进行了闪避`},{category:m.Attack,coeff:{str:1,int:0,con:0,siz:0,app:0,dex:1},messageGenerator:(e,t)=>`${e.name} 进行了回旋击`}]},DragonBreath:{name:"巨龙吐息",description:"据说巨龙的吐息足以融化钢铁",rarity:L.Legendary,hits:[{category:m.Attack,coeff:{str:0,int:10,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 喷出了汹涌的火焰`},{category:m.Attack,coeff:{str:0,int:5,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 喷出了灼热的火焰`},{category:m.Attack,coeff:{str:0,int:2,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${e.name} 喷出了喉咙中残余的火焰`}]},GodStrike:{name:"神击",description:"犹如神灵降下天罚",rarity:L.Unique,hits:[{category:m.Attack,coeff:{str:12,int:6,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`神明的愤怒降临于${t.name}`}]},ShredFlower:{name:"碎花",description:"无人能看清动作，空中轻柔的落花瞬间化为齑粉",rarity:L.Unique,hits:[{category:m.Defend,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:6},messageGenerator:(e,t)=>`${e.name} 被花瓣包围了`},{category:m.Dodge,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:6},messageGenerator:(e,t)=>`${e.name} 的身影消失了`},{category:m.Attack,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:4},messageGenerator:(e,t)=>"空气中只有残影"},{category:m.Attack,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:4},messageGenerator:(e,t)=>"空气中只有更多的残影"},{category:m.Attack,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:3},messageGenerator:(e,t)=>`${t.name} 同花瓣一同破碎`}]},PsyKick:{name:"念动力踢击",description:"通过念力完成的隔空踢击，力道十足又难以防备",rarity:L.Rare,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.Attack,coeff:{str:2,int:6,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${t.name}凭空被踢了一脚`}]},PsyExplosion:{name:"不可视爆裂",description:"不可视的念力凝聚成万吨重锤从天而降",rarity:L.Legendary,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.Attack,coeff:{str:4,int:12,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`${t.name}所在的位置发生了大爆炸`}]},PsyInvisibleSword:{name:'"不可视之剑"',description:"无数看不见的剑刺向敌人，流淌的血勾勒出它们的形状",rarity:L.Unique,hits:[{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.None,coeff:{str:0,int:0,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>"一切如常"},{category:m.Attack,coeff:{str:0,int:2,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`看不见的剑贯穿${t.name}`},{category:m.Attack,coeff:{str:0,int:4,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`更多看不见的剑贯穿${t.name}`},{category:m.Attack,coeff:{str:0,int:8,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`极多看不见的剑贯穿${t.name}`},{category:m.Attack,coeff:{str:0,int:16,con:0,siz:0,app:0,dex:0},messageGenerator:(e,t)=>`无数看不见的剑贯穿${t.name}`}]}};var hi=(e=>(e.Sword="Sword",e.Katana="Katana",e.WindSpinSword="WindSpinSword",e.AyulsaOfNoHonor="AyulsaOfNoHonor",e.RockSword="RockSword",e.Rope="Rope",e.DragonSlayer="DragonSlayer",e))(hi||{});const ii={Sword:{name:"剑",description:"一把剑,平平无奇的武器",rarity:L.Common,position:Ht.Hand,extraActions:[{actionType:A.Attack,weight:.3},{actionType:A.PowerAttack,weight:.2}],ability:{},actionCoeff:{[m.Attack]:{plus:1,multiply:1}}},Rope:{name:"绳索",description:"绳索,看起来很适合用来捕捉",rarity:L.Common,position:Ht.Hand,extraActions:[{actionType:A.Capture,weight:.2}],ability:{},actionCoeff:{[m.Attack]:{plus:-1,multiply:.9},[m.Capture]:{plus:2,multiply:1}}},Katana:{name:"太刀",description:"太好了，有了这个，你就可以做虾头太刀侠了",rarity:L.Rare,position:Ht.Hand,extraActions:[{actionType:A.HorizontalSlash,weight:1}],ability:{str:1,dex:-1},actionCoeff:{[m.Attack]:{plus:2,multiply:1},[m.Dodge]:{plus:-2,multiply:1}}},WindSpinSword:{name:"风旋刺剑",description:"靠近剑身能听到轻轻的风声",rarity:L.Epic,position:Ht.Hand,extraActions:[{actionType:A.QuickAttack,weight:.4},{actionType:A.Dodge,weight:.2},{actionType:A.SpinAttack,weight:.4}],ability:{dex:2},actionCoeff:{[m.Attack]:{plus:1,multiply:1},[m.Dodge]:{plus:2,multiply:1}}},RockSword:{name:"剑型大石头",description:"一把很宽的石头大剑，看起来就像块大石头",rarity:L.Epic,position:Ht.Hand,extraActions:[{actionType:A.DefenseSlash,weight:.4},{actionType:A.Defend,weight:.2},{actionType:A.Counter,weight:.4},{actionType:A.PowerAttack,weight:.2}],ability:{str:1,con:1},actionCoeff:{[m.Attack]:{plus:2,multiply:1},[m.Defend]:{plus:3,multiply:1}}},DragonSlayer:{name:"弑龙者",description:"传说这把剑上的龙之力来源于被它杀死的龙",rarity:L.Legendary,position:Ht.Hand,extraActions:[{actionType:A.HorizontalSlash,weight:1},{actionType:A.DragonBreath,weight:.5}],ability:{str:1,con:2},actionCoeff:{[m.Attack]:{plus:3,multiply:1.1}}},AyulsaOfNoHonor:{name:"Ayulsa死于徒手",description:"Ayulsa手上没有武器",rarity:L.Unique,position:Ht.Hand,extraActions:[{actionType:A.PsyKick,weight:.2},{actionType:A.PsyExplosion,weight:1},{actionType:A.PsyInvisibleSword,weight:.2},{actionType:A.PsyDodge,weight:.6}],ability:{int:2,dex:2},actionCoeff:{}}};class Cr{constructor(t,n,i,r,s,o){V(this,"name");V(this,"uuid");V(this,"category");V(this,"type");V(this,"rarity");V(this,"description");this.name=t,this.uuid=n,this.category=i,this.type=r,this.rarity=s,this.description=o}}const nt=[];for(let e=0;e<256;++e)nt.push((e+256).toString(16).slice(1));function Hs(e,t=0){return(nt[e[t+0]]+nt[e[t+1]]+nt[e[t+2]]+nt[e[t+3]]+"-"+nt[e[t+4]]+nt[e[t+5]]+"-"+nt[e[t+6]]+nt[e[t+7]]+"-"+nt[e[t+8]]+nt[e[t+9]]+"-"+nt[e[t+10]]+nt[e[t+11]]+nt[e[t+12]]+nt[e[t+13]]+nt[e[t+14]]+nt[e[t+15]]).toLowerCase()}let Rn;const Bs=new Uint8Array(16);function zs(){if(!Rn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rn=crypto.getRandomValues.bind(crypto)}return Rn(Bs)}const Ws=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ji={randomUUID:Ws};function xr(e,t,n){var r;if(ji.randomUUID&&!e)return ji.randomUUID();e=e||{};const i=e.random??((r=e.rng)==null?void 0:r.call(e))??zs();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Hs(i)}class ne extends Cr{constructor(n){n=n||hi.Sword;const i=ii[n];super(i.name,xr(),ee.Equipment,n,i.rarity,i.description);V(this,"position");V(this,"extraActions");V(this,"ability");V(this,"actionCoeff");V(this,"prefix");this.position=i.position,this.extraActions=i.extraActions,this.ability=i.ability,this.actionCoeff=i.actionCoeff,this.prefix=Gs()}}function Gs(){return Object.values(ei)[Math.floor(Math.random()*Object.values(ei).length)]}function Vs(e){const t=Object.keys(ii).filter(r=>ii[r].rarity===e),n=Math.floor(Math.random()*t.length),i=t[n];return new ne(i)}function ke(e,t){return Math.random()<.1?t-=1:Math.random()<.05&&(t+=1),t=t<L.Common?L.Common:t,t=t>L.Unique?L.Unique:t,Vs(t)}var et=(e=>(e.Unknown="Unknown",e.BrokenChest="BrokenChest",e.WoodenChest="WoodenChest",e.SilverChest="SilverChest",e.GoldChest="GoldChest",e.DiamondChest="DiamondChest",e))(et||{});const Hi={BrokenChest:{name:"破烂的木宝箱",rarity:L.Common,description:"一个破破烂烂的宝箱",effect:e=>{e.pack.push(ke(1,L.Common))}},WoodenChest:{name:"木质的宝箱",rarity:L.Rare,description:"一个有着漂亮的木质纹理的宝箱",effect:e=>{e.pack.push(ke(1,L.Rare))}},SilverChest:{name:"银色装饰的宝箱",rarity:L.Epic,description:"这个宝箱上有着精细的银制装饰，银锈并不能掩盖它的华丽",effect:e=>{e.pack.push(ke(1,L.Epic))}},GoldChest:{name:"黄金镶边的宝箱",rarity:L.Legendary,description:"金光闪闪，这才叫宝箱！光是看着就让人心潮澎湃",effect:e=>{e.pack.push(ke(1,L.Legendary))}},DiamondChest:{name:"华丽的宝石宝箱",rarity:L.Unique,description:"无法用辞藻形容的华丽，你甚至害怕打开它会划伤上面美丽的宝石",effect:e=>{e.pack.push(ke(1,L.Unique))}},Unknown:{name:"未知",rarity:L.Common,description:"未知",effect:e=>{}}};var ut=(e=>(e.Player="Player",e.Player114514="Player114514",e.Slime="Slime",e.Dragon="Dragon",e.AngryDragon="AngryDragon",e.WeakDragon="WeakDragon",e.Wolf="Wolf",e.DiscardedGolem="DiscardedGolem",e.Ayulsa="Ayulsa",e.Toono="Toono",e))(ut||{});const He={Player:{typeName:"人类",description:"你",abilityCoeff:{str:{base:5,growth:.1},int:{base:5,growth:.1},con:{base:5,growth:.2},siz:{base:5,growth:0},app:{base:5,growth:0},dex:{base:5,growth:.1},armor:{base:0,growth:0}},actions:[{actionType:A.Attack,weight:.5},{actionType:A.Capture,weight:.1},{actionType:A.Defend,weight:.2},{actionType:A.Dodge,weight:.2}],dropItems:[]},Player114514:{typeName:"野兽仙贝",description:"24岁，是学生",abilityCoeff:{str:{base:5,growth:.1},int:{base:5,growth:0},con:{base:7,growth:.3},siz:{base:5,growth:.05},app:{base:7,growth:0},dex:{base:5,growth:.05},armor:{base:0,growth:0}},actions:[{actionType:A.PowerfulDigAttack,weight:.4},{actionType:A.Yarimasune,weight:.4},{actionType:A.Capture,weight:.4},{actionType:A.Repent,weight:.4},{actionType:A.SleepyTea,weight:.4}],dropItems:[]},Toono:{typeName:"远野",description:"后辈",abilityCoeff:{str:{base:10,growth:.1},int:{base:5,growth:.1},con:{base:10,growth:.2},siz:{base:5,growth:0},app:{base:5,growth:0},dex:{base:5,growth:.1},armor:{base:0,growth:0}},actions:[{actionType:A.PowerfulDigAttack,weight:.4},{actionType:A.Counter,weight:.4},{actionType:A.Dodge,weight:.2}],dropItems:[{type:null,weight:1}]},Slime:{typeName:"史莱姆",description:"一种行动缓慢的软体生物，武器打上去没有什么手感",abilityCoeff:{str:{base:3,growth:.05},int:{base:0,growth:0},con:{base:3,growth:.1},siz:{base:2,growth:0},app:{base:0,growth:0},dex:{base:1,growth:.05},armor:{base:50,growth:1}},actions:[{actionType:A.Attack,weight:1},{actionType:A.Defend,weight:1},{actionType:A.Dazed,weight:2}],dropItems:[{type:null,weight:.6},{type:et.BrokenChest,weight:.4},{type:et.WoodenChest,weight:.02},{type:et.SilverChest,weight:.001}]},Dragon:{typeName:"龙",description:"生态位的顶端，人类在它庞大的身躯面前就像一只蝼蚁。它正用着锐利的目光打量着你，让你不寒而栗。<br>Tips: 你并不需要一次性击败Boss，对其造成20%最大生命值以上的伤害即可永久削减其生命值。你可以通过多次战斗来最终击败它。",abilityCoeff:{str:{base:10,growth:.2},int:{base:4,growth:.1},con:{base:20,growth:.8},siz:{base:20,growth:.2},app:{base:4,growth:.1},dex:{base:4,growth:.1},armor:{base:50,growth:10}},actions:[{actionType:A.Bite,weight:.1},{actionType:A.PowerAttack,weight:.2},{actionType:A.Counter,weight:.2},{actionType:A.DragonBreath,weight:.2},{actionType:A.QuickAttack,weight:.2},{actionType:A.Defend,weight:.1}],dropItems:[]},AngryDragon:{typeName:"愤怒的龙",description:"龙彻底被激怒了，一只蝼蚁居然让它受了伤。它有些虚弱，但是攻击更加狂暴了",abilityCoeff:{str:{base:15,growth:.3},int:{base:3,growth:.05},con:{base:10,growth:.4},siz:{base:20,growth:.2},app:{base:2,growth:.05},dex:{base:6,growth:.15},armor:{base:25,growth:5}},actions:[{actionType:A.Bite,weight:.1},{actionType:A.PowerAttack,weight:.2},{actionType:A.DragonBreath,weight:.2},{actionType:A.QuickAttack,weight:.2}],dropItems:[]},WeakDragon:{typeName:"虚弱的龙",description:"它抛弃了自己作为龙的尊严，现在一心只想活下去",abilityCoeff:{str:{base:5,growth:.1},int:{base:6,growth:.15},con:{base:5,growth:.2},siz:{base:20,growth:.2},app:{base:2,growth:.05},dex:{base:4,growth:.1},armor:{base:20,growth:3}},actions:[{actionType:A.Bite,weight:.2},{actionType:A.Counter,weight:.3},{actionType:A.DragonBreath,weight:.2},{actionType:A.Defend,weight:.3}],dropItems:[{type:et.SilverChest,weight:.98},{type:et.GoldChest,weight:.02},{type:et.DiamondChest,weight:.001}]},Wolf:{typeName:"孤狼",description:"一匹行动敏捷的孤狼，对于普通人来说，它是一种危险的生物",abilityCoeff:{str:{base:5,growth:.1},int:{base:2,growth:.05},con:{base:5,growth:.15},siz:{base:4,growth:.05},app:{base:2,growth:0},dex:{base:6,growth:.15},armor:{base:0,growth:1}},actions:[{actionType:A.Bite,weight:1},{actionType:A.QuickAttack,weight:.5},{actionType:A.SpinAttack,weight:.5}],dropItems:[{type:et.BrokenChest,weight:.7},{type:et.WoodenChest,weight:.3},{type:et.SilverChest,weight:.015},{type:et.GoldChest,weight:.001}]},DiscardedGolem:{typeName:"废弃的岩石魔像",description:"一尊不知何时被废弃的岩石魔像，在风雨的侵蚀下，它的巨大的身躯上布满了裂痕和苔藓。它不该会动呀？",abilityCoeff:{str:{base:15,growth:.3},int:{base:0,growth:0},con:{base:10,growth:.4},siz:{base:15,growth:0},app:{base:0,growth:0},dex:{base:0,growth:0},armor:{base:100,growth:0}},actions:[{actionType:A.Dazed,weight:2},{actionType:A.Defend,weight:1},{actionType:A.PowerAttack,weight:.5},{actionType:A.Counter,weight:.5}],dropItems:[{type:et.BrokenChest,weight:.2},{type:et.WoodenChest,weight:.8},{type:et.SilverChest,weight:.04},{type:et.GoldChest,weight:.004}]},Ayulsa:{typeName:"???",description:"好像并不来自于这个世界",abilityCoeff:{str:{base:5,growth:.2},int:{base:50,growth:.2},con:{base:5,growth:.4},siz:{base:5,growth:.2},app:{base:5,growth:.2},dex:{base:5,growth:.2},armor:{base:0,growth:.2}},actions:[{actionType:A.GodStrike,weight:1},{actionType:A.ShredFlower,weight:1},{actionType:A.PsyKick,weight:1},{actionType:A.PsyExplosion,weight:1},{actionType:A.PsyInvisibleSword,weight:1},{actionType:A.PsyDodge,weight:1}],dropItems:[{type:et.DiamondChest,weight:1}]}};class Lr{constructor(t,n,i,r){V(this,"name");V(this,"type");V(this,"level");V(this,"individualStrength");V(this,"maxHealth");V(this,"health");V(this,"ability");V(this,"status",[]);V(this,"pack",[]);V(this,"equipments",{head:null,body:null,hand:null,foot:null,accessory:null});V(this,"actions");this.name=t,this.type=n,this.level=i,this.individualStrength=r,this.ability=this.calculateAbility(),this.maxHealth=this.ability.con*10+this.ability.siz*5,this.health=this.maxHealth,this.actions=He[this.type].actions}calculateAbility(){const t=He[this.type].abilityCoeff,n=["str","int","con","siz","app","dex","armor"],i={};return n.forEach(r=>{i[r]=t[r].base+t[r].growth*this.level*this.individualStrength}),i}levelup(){this.level++,this.ability=this.calculateAbility(),this.maxHealth=this.ability.con*10+this.ability.siz*5,this.health=this.maxHealth}getRandomAction(){const t=Math.random(),n=this.getActions(),i=n.reduce((s,o)=>s+o.weight,0);let r=0;for(const s of n)if(r+=s.weight,t<r/i)return ni[s.actionType];return ni[A.Dazed]}wearEquipment(t){this.equipments[t.position]&&this.removeEquipment(t.position),this.equipments[t.position]=t,this.pack.splice(this.pack.indexOf(t),1)}removeEquipment(t){this.equipments[t]&&(this.pack.push(this.equipments[t]),this.equipments[t]=null)}getAbility(){const t={...this.ability},n=["str","int","con","siz","app","dex","armor"];for(const i of Object.values(this.equipments))i&&n.forEach(r=>{var s;t[r]+=((s=i.ability)==null?void 0:s[r])??0});for(const i of Object.values(this.equipments))i&&n.forEach(r=>{var s,o;t[r]*=((o=(s=i.actionCoeff)==null?void 0:s[r])==null?void 0:o.multiply)??1});return t}getActions(){const t=[...this.actions];for(const n of Object.values(this.equipments))n&&t.push(...n.extraActions);return t}}class ye extends Lr{constructor(n,i){n=n||"吴田所",i=i||ut.Player;super(n,i,0,1);V(this,"log",[]);V(this,"tempLog",[]);V(this,"capturedMonster",[]);V(this,"isAtHome",!0);V(this,"exp",0)}getNextLevelExp(){return this.level<=10?100:this.level<=20?100+(this.level-10)*40:500*Math.pow(1.2,this.level-20)}checkLevelUp(){let n=this.getNextLevelExp(),i=!1;for(;this.exp>=n;)this.exp-=n,this.levelup(),i=!0,n=this.getNextLevelExp();return i}getExpDisplay(){const n=this.getNextLevelExp();return`
      <div class="progress" style="height: 2px; position: relative;">
        <div class="progress-bar" role="progressbar" style="width: ${Math.min(100,this.exp/n*100)}%;"
             aria-valuenow="${this.exp}" aria-valuemin="0" aria-valuemax="${n}">
        </div>
      </div>
    `}getHealthDisplay(){const n=Math.min(100,this.health/this.maxHealth*100),i=this.ability.con/5*this.maxHealth/900;return`
    <div class="progress" style="height: 20px; position: relative; background-color: #444;">
      <div class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar" style="width: ${n}%;"
           aria-valuenow="${this.health}" aria-valuemin="0" aria-valuemax="${this.maxHealth}">
      </div>
      <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
        <div style="text-align: center; line-height: 20px; font-size: 0.9rem; font-weight: bold; color: #fff;">
          hp: ${this.health.toFixed(1)} / ${this.maxHealth.toFixed(1)}
        </div>
        <div style="position: absolute; top: 0; right: 5px; height: 100%; display: flex; align-items: center; font-size: 0.9rem; font-weight: bold; color: #fff;">
          +${i.toFixed(2)}
        </div>
      </div>
    </div>
  `}updateHealthDisplay(){const n=document.getElementById("health-display");n&&(n.innerHTML=this.getHealthDisplay())}autoRecoverHpDot(){const n=this.ability.con/5*this.maxHealth/900;this.health=Math.min(this.health+n,this.maxHealth)}addLog(n){this.log.push(n)}getLogs(){return this.log.join("<br>")}getLastNLog(n){return this.log.slice(-n).join("<br>")}addTempLog(n){this.tempLog.push(n)}getTempLogs(){return this.tempLog.join("<br>")}clearTempLogs(){this.tempLog=[]}joinTempLogs(){this.log.push(this.tempLog.join("<br>")),this.tempLog=[]}}var H;(function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(H||(H={}));var Fs=function(){function e(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return e.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},e.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.findTransformMetadatas=function(t,n,i){return this.findMetadatas(this._transformMetadatas,t,n).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?i===H.CLASS_TO_CLASS||i===H.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?i===H.CLASS_TO_PLAIN:!0})},e.prototype.findExcludeMetadata=function(t,n){return this.findMetadata(this._excludeMetadatas,t,n)},e.prototype.findExposeMetadata=function(t,n){return this.findMetadata(this._exposeMetadatas,t,n)},e.prototype.findExposeMetadataByCustomName=function(t,n){return this.getExposedMetadatas(t).find(function(i){return i.options&&i.options.name===n})},e.prototype.findTypeMetadata=function(t,n){return this.findMetadata(this._typeMetadatas,t,n)},e.prototype.getStrategy=function(t){var n=this._excludeMetadatas.get(t),i=n&&n.get(void 0),r=this._exposeMetadatas.get(t),s=r&&r.get(void 0);return i&&s||!i&&!s?"none":i?"excludeAll":"exposeAll"},e.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},e.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},e.prototype.getExposedProperties=function(t,n){return this.getExposedMetadatas(t).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?n===H.CLASS_TO_CLASS||n===H.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?n===H.CLASS_TO_PLAIN:!0}).map(function(i){return i.propertyName})},e.prototype.getExcludedProperties=function(t,n){return this.getExcludedMetadatas(t).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?n===H.CLASS_TO_CLASS||n===H.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?n===H.CLASS_TO_PLAIN:!0}).map(function(i){return i.propertyName})},e.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},e.prototype.getMetadata=function(t,n){var i=t.get(n),r;i&&(r=Array.from(i.values()).filter(function(_){return _.propertyName!==void 0}));for(var s=[],o=0,a=this.getAncestors(n);o<a.length;o++){var c=a[o],h=t.get(c);if(h){var d=Array.from(h.values()).filter(function(_){return _.propertyName!==void 0});s.push.apply(s,d)}}return s.concat(r||[])},e.prototype.findMetadata=function(t,n,i){var r=t.get(n);if(r){var s=r.get(i);if(s)return s}for(var o=0,a=this.getAncestors(n);o<a.length;o++){var c=a[o],h=t.get(c);if(h){var d=h.get(i);if(d)return d}}},e.prototype.findMetadatas=function(t,n,i){var r=t.get(n),s;r&&(s=r.get(i));for(var o=[],a=0,c=this.getAncestors(n);a<c.length;a++){var h=c[a],d=t.get(h);d&&d.has(i)&&o.push.apply(o,d.get(i))}return o.slice().reverse().concat((s||[]).slice().reverse())},e.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var n=[],i=Object.getPrototypeOf(t.prototype.constructor);typeof i.prototype<"u";i=Object.getPrototypeOf(i.prototype.constructor))n.push(i);this._ancestorsMap.set(t,n)}return this._ancestorsMap.get(t)},e}(),ct=new Fs;function Us(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function Ks(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Bi=function(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))};function Ys(e){var t=new e;return!(t instanceof Set)&&!("push"in t)?[]:t}var he=function(){function e(t,n){this.transformationType=t,this.options=n,this.recursionStack=new Set}return e.prototype.transform=function(t,n,i,r,s,o){var a=this;if(o===void 0&&(o=0),Array.isArray(n)||n instanceof Set){var c=r&&this.transformationType===H.PLAIN_TO_CLASS?Ys(r):[];return n.forEach(function(y,k){var P=t?t[k]:void 0;if(!a.options.enableCircularCheck||!a.isCircular(y)){var I=void 0;if(typeof i!="function"&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(a.transformationType===H.PLAIN_TO_CLASS){I=i.options.discriminator.subTypes.find(function(G){return G.name===y[i.options.discriminator.property]});var N={newObject:c,object:y,property:void 0},O=i.typeFunction(N);I===void 0?I=O:I=I.value,i.options.keepDiscriminatorProperty||delete y[i.options.discriminator.property]}a.transformationType===H.CLASS_TO_CLASS&&(I=y.constructor),a.transformationType===H.CLASS_TO_PLAIN&&(y[i.options.discriminator.property]=i.options.discriminator.subTypes.find(function(G){return G.value===y.constructor}).name)}else I=i;var $=a.transform(P,y,I,void 0,y instanceof Map,o+1);c instanceof Set?c.add($):c.push($)}else a.transformationType===H.CLASS_TO_CLASS&&(c instanceof Set?c.add(y):c.push(y))}),c}else{if(i===String&&!s)return n==null?n:String(n);if(i===Number&&!s)return n==null?n:Number(n);if(i===Boolean&&!s)return n==null?n:!!n;if((i===Date||n instanceof Date)&&!s)return n instanceof Date?new Date(n.valueOf()):n==null?n:new Date(n);if(Us().Buffer&&(i===Buffer||n instanceof Buffer)&&!s)return n==null?n:Buffer.from(n);if(Ks(n)&&!s)return new Promise(function(y,k){n.then(function(P){return y(a.transform(void 0,P,i,void 0,void 0,o+1))},k)});if(!s&&n!==null&&typeof n=="object"&&typeof n.then=="function")return n;if(typeof n=="object"&&n!==null){!i&&n.constructor!==Object&&(!Array.isArray(n)&&n.constructor===Array||(i=n.constructor)),!i&&t&&(i=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(n);var h=this.getKeys(i,n,s),d=t||{};!t&&(this.transformationType===H.PLAIN_TO_CLASS||this.transformationType===H.CLASS_TO_CLASS)&&(s?d=new Map:i?d=new i:d={});for(var _=function(y){if(y==="__proto__"||y==="constructor")return"continue";var k=y,P=y,I=y;if(!p.options.ignoreDecorators&&i){if(p.transformationType===H.PLAIN_TO_CLASS){var N=ct.findExposeMetadataByCustomName(i,y);N&&(I=N.propertyName,P=N.propertyName)}else if(p.transformationType===H.CLASS_TO_PLAIN||p.transformationType===H.CLASS_TO_CLASS){var N=ct.findExposeMetadata(i,y);N&&N.options&&N.options.name&&(P=N.options.name)}}var O=void 0;p.transformationType===H.PLAIN_TO_CLASS?O=n[k]:n instanceof Map?O=n.get(k):n[k]instanceof Function?O=n[k]():O=n[k];var $=void 0,G=O instanceof Map;if(i&&s)$=i;else if(i){var j=ct.findTypeMetadata(i,I);if(j){var q={newObject:d,object:n,property:I},K=j.typeFunction?j.typeFunction(q):j.reflectedType;j.options&&j.options.discriminator&&j.options.discriminator.property&&j.options.discriminator.subTypes?n[k]instanceof Array?$=j:(p.transformationType===H.PLAIN_TO_CLASS&&($=j.options.discriminator.subTypes.find(function(Y){if(O&&O instanceof Object&&j.options.discriminator.property in O)return Y.name===O[j.options.discriminator.property]}),$===void 0?$=K:$=$.value,j.options.keepDiscriminatorProperty||O&&O instanceof Object&&j.options.discriminator.property in O&&delete O[j.options.discriminator.property]),p.transformationType===H.CLASS_TO_CLASS&&($=O.constructor),p.transformationType===H.CLASS_TO_PLAIN&&O&&(O[j.options.discriminator.property]=j.options.discriminator.subTypes.find(function(Y){return Y.value===O.constructor}).name)):$=K,G=G||j.reflectedType===Map}else if(p.options.targetMaps)p.options.targetMaps.filter(function(Y){return Y.target===i&&!!Y.properties[I]}).forEach(function(Y){return $=Y.properties[I]});else if(p.options.enableImplicitConversion&&p.transformationType===H.PLAIN_TO_CLASS){var X=Reflect.getMetadata("design:type",i.prototype,I);X&&($=X)}}var it=Array.isArray(n[k])?p.getReflectedType(i,I):void 0,Z=t?t[k]:void 0;if(d.constructor.prototype){var mt=Object.getOwnPropertyDescriptor(d.constructor.prototype,P);if((p.transformationType===H.PLAIN_TO_CLASS||p.transformationType===H.CLASS_TO_CLASS)&&(mt&&!mt.set||d[P]instanceof Function))return"continue"}if(!p.options.enableCircularCheck||!p.isCircular(O)){var rt=p.transformationType===H.PLAIN_TO_CLASS?P:y,R=void 0;p.transformationType===H.CLASS_TO_PLAIN?(R=n[rt],R=p.applyCustomTransformations(R,i,rt,n,p.transformationType),R=n[rt]===R?O:R,R=p.transform(Z,R,$,it,G,o+1)):O===void 0&&p.options.exposeDefaultValues?R=d[P]:(R=p.transform(Z,O,$,it,G,o+1),R=p.applyCustomTransformations(R,i,rt,n,p.transformationType)),(R!==void 0||p.options.exposeUnsetFields)&&(d instanceof Map?d.set(P,R):d[P]=R)}else if(p.transformationType===H.CLASS_TO_CLASS){var R=O;R=p.applyCustomTransformations(R,i,y,n,p.transformationType),(R!==void 0||p.options.exposeUnsetFields)&&(d instanceof Map?d.set(P,R):d[P]=R)}},p=this,T=0,z=h;T<z.length;T++){var M=z[T];_(M)}return this.options.enableCircularCheck&&this.recursionStack.delete(n),d}else return n}},e.prototype.applyCustomTransformations=function(t,n,i,r,s){var o=this,a=ct.findTransformMetadatas(n,i,this.transformationType);return this.options.version!==void 0&&(a=a.filter(function(c){return c.options?o.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?a=a.filter(function(c){return c.options?o.checkGroups(c.options.groups):!0}):a=a.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),a.forEach(function(c){t=c.transformFn({value:t,key:i,obj:r,type:s,options:o.options})}),t},e.prototype.isCircular=function(t){return this.recursionStack.has(t)},e.prototype.getReflectedType=function(t,n){if(t){var i=ct.findTypeMetadata(t,n);return i?i.reflectedType:void 0}},e.prototype.getKeys=function(t,n,i){var r=this,s=ct.getStrategy(t);s==="none"&&(s=this.options.strategy||"exposeAll");var o=[];if((s==="exposeAll"||i)&&(n instanceof Map?o=Array.from(n.keys()):o=Object.keys(n)),i)return o;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){var a=ct.getExposedProperties(t,this.transformationType),c=ct.getExcludedProperties(t,this.transformationType);o=Bi(Bi([],a,!0),c,!0)}if(!this.options.ignoreDecorators&&t){var a=ct.getExposedProperties(t,this.transformationType);this.transformationType===H.PLAIN_TO_CLASS&&(a=a.map(function(_){var p=ct.findExposeMetadata(t,_);return p&&p.options&&p.options.name?p.options.name:_})),this.options.excludeExtraneousValues?o=a:o=o.concat(a);var h=ct.getExcludedProperties(t,this.transformationType);h.length>0&&(o=o.filter(function(_){return!h.includes(_)})),this.options.version!==void 0&&(o=o.filter(function(_){var p=ct.findExposeMetadata(t,_);return!p||!p.options?!0:r.checkVersion(p.options.since,p.options.until)})),this.options.groups&&this.options.groups.length?o=o.filter(function(_){var p=ct.findExposeMetadata(t,_);return!p||!p.options?!0:r.checkGroups(p.options.groups)}):o=o.filter(function(_){var p=ct.findExposeMetadata(t,_);return!p||!p.options||!p.options.groups||!p.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(o=o.filter(function(d){return r.options.excludePrefixes.every(function(_){return d.substr(0,_.length)!==_})})),o=o.filter(function(d,_,p){return p.indexOf(d)===_}),o},e.prototype.checkVersion=function(t,n){var i=!0;return i&&t&&(i=this.options.version>=t),i&&n&&(i=this.options.version<n),i},e.prototype.checkGroups=function(t){return t?this.options.groups.some(function(n){return t.includes(n)}):!0},e}(),pe={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},lt=function(){return lt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lt.apply(this,arguments)},qs=function(){function e(){}return e.prototype.instanceToPlain=function(t,n){var i=new he(H.CLASS_TO_PLAIN,lt(lt({},pe),n));return i.transform(void 0,t,void 0,void 0,void 0,void 0)},e.prototype.classToPlainFromExist=function(t,n,i){var r=new he(H.CLASS_TO_PLAIN,lt(lt({},pe),i));return r.transform(n,t,void 0,void 0,void 0,void 0)},e.prototype.plainToInstance=function(t,n,i){var r=new he(H.PLAIN_TO_CLASS,lt(lt({},pe),i));return r.transform(void 0,n,t,void 0,void 0,void 0)},e.prototype.plainToClassFromExist=function(t,n,i){var r=new he(H.PLAIN_TO_CLASS,lt(lt({},pe),i));return r.transform(t,n,void 0,void 0,void 0,void 0)},e.prototype.instanceToInstance=function(t,n){var i=new he(H.CLASS_TO_CLASS,lt(lt({},pe),n));return i.transform(void 0,t,void 0,void 0,void 0,void 0)},e.prototype.classToClassFromExist=function(t,n,i){var r=new he(H.CLASS_TO_CLASS,lt(lt({},pe),i));return r.transform(n,t,void 0,void 0,void 0,void 0)},e.prototype.serialize=function(t,n){return JSON.stringify(this.instanceToPlain(t,n))},e.prototype.deserialize=function(t,n,i){var r=JSON.parse(n);return this.plainToInstance(t,r,i)},e.prototype.deserializeArray=function(t,n,i){var r=JSON.parse(n);return this.plainToInstance(t,r,i)},e}(),Nr=new qs;function Xs(e,t){return Nr.instanceToPlain(e,t)}function on(e,t,n){return Nr.plainToInstance(e,t,n)}let jn=-1,Hn=-1;function ri(e){jn!==-1&&clearInterval(jn),Hn!==-1&&clearInterval(Hn),jn=setInterval(()=>{e.isAtHome&&(e.autoRecoverHpDot(),e.updateHealthDisplay())},1e3),Hn=setInterval(()=>{e.isAtHome&&Bt(e)},1e4)}class Be extends Cr{constructor(t){t=t||et.Unknown;const n=Hi[t];super(n.name,xr(),ee.Consumable,t,n.rarity,n.description)}useItem(t){Hi[this.type].effect(t),t.pack=t.pack.filter(n=>n.uuid!==this.uuid)}}function Bt(e){const t=Xs(e);localStorage.setItem("playerData",JSON.stringify(t))}function Qs(){const e=localStorage.getItem("playerData");if(!e)throw new Error("No player data found");const t=JSON.parse(e),n=on(ye,t);return ri(n),n.pack=t.pack.map(r=>r.category===ee.Equipment?on(ne,r):r.category===ee.Consumable?on(Be,r):r),Object.keys(n.equipments).forEach(r=>{n.equipments[r]&&(n.equipments[r]=on(ne,n.equipments[r]))}),n}function wt(){const e=document.getElementById("app");if(!e)throw new Error("无法找到挂载点 #app");return e}function vn(e){switch(e){case L.Unique:return"danger";case L.Legendary:return"warning";case L.Epic:return"info";case L.Rare:return"success";default:return"secondary"}}function ie(e){switch(e.category){case m.Attack:return"🗡️";case m.Defend:return"🛡️";case m.Dodge:return"💫";case m.Capture:return"🕸️";case m.Special:return"💥";case m.None:return"❔";default:return""}}function Js(e){switch(e.category){case ee.Equipment:return"🗡️";case ee.Consumable:return"🗝️";default:return""}}function Zs(e){const t=`
    <div class="tooltip-base tooltip-header">
      <h5 class="text-${vn(e.rarity)}">${e.name}</h5>
      <p>${e.description}</p>
      <p><strong>位置:</strong> ${e.position}</p>
      <br>
    </div>
  `;let n="";e.ability&&Object.keys(e.ability).length>0&&(n=`
      <div class="tooltip-abilities tooltip-extra">
        <p><strong>属性: </strong>
          ${Object.entries(e.ability).map(([s,o])=>`${s}: ${o}`).join(", ")}
        </p>
      </div>
    `);let i="";e.extraActions&&e.extraActions.length>0&&(i=`
      <div class="tooltip-extra-actions tooltip-extra">
        <p><strong>额外行动: </strong>
          ${e.extraActions.map(s=>`${ni[s.actionType].name} (权重: ${s.weight})`).join(", ")}
      </div>
    `);let r="";return e.actionCoeff&&Object.keys(e.actionCoeff).length>0&&(r=`
      <div class="tooltip-action-coeff tooltip-extra">
        <p><strong>行动系数: </strong>
          ${Object.entries(e.actionCoeff).map(([s,o])=>`${s}: ${o.plus<0?"":"+"}${o.plus} ${o.multiply===1?"":"x"+o.multiply}`).join(", ")}
      </div>
    `),t+n+i+r}function zi(e){return e instanceof Be?`
      <div class="tooltip-base tooltip-header">
        <h5>${e.name}</h5>
        <p>${e.description}</p>
      </div>
    `:e instanceof ne?Zs(e):`
    <div class="tooltip-base">
      <h5>${e.name}</h5>
      <p>${e.description}</p>
    </div>
  `}const to="/game-otherworld/assets/player-8N5Sf3fj.gif";function eo(e){if(e in et)return new Be(e);if(e in hi)return new ne(e);throw new Error("Invalid item type")}class pi extends Lr{constructor(n,i,r,s){n=n||"怪物",i=i||ut.Slime,r=r||1,s=s||1;super(n,i,r,s);V(this,"description");V(this,"dropItems");V(this,"giveExp",0);this.dropItems=He[i].dropItems,this.description=He[i].description,this.giveExp=Math.floor(this.maxHealth)*(1+this.level/10)}randomDropItem(){const n=this.dropItems.reduce((r,s)=>r+s.weight,0);let i=Math.random()*n;for(const r of this.dropItems){if(i<r.weight&&r.type)return eo(r.type);i-=r.weight}return null}}function no(e,t,n,i){e.addTempLog(e.name+"使用了"+n.name+"，"+t.name+"使用了"+i.name);let r=0;for(;n.hits[r]||i.hits[r];){const s=n.hits[r]||sn,o=i.hits[r]||sn;if(s.category===m.Capture&&(s.category=m.Attack),s.category===m.Attack&&o.category===m.Attack)io(e,t,s,o);else if(s.category===m.Attack&&o.category===m.None||s.category===m.None&&o.category===m.Attack)ro(e,t,s,o);else if(s.category===m.Attack&&o.category===m.Defend||s.category===m.Defend&&o.category===m.Attack)so(e,t,s,o);else if(s.category===m.Dodge&&o.category===m.Attack||s.category===m.Attack&&o.category===m.Dodge){const a=oo(e,t,s,o);a==="player"&&n.hits[r+1]?n.hits[r+1]=sn:a==="enemy"&&i.hits[r+1]&&(i.hits[r+1]=sn)}else e.addTempLog("无事发生("+e.name+ie(s)+" "+t.name+ie(o)+")");r++}}function io(e,t,n,i){const r=Dt(n.coeff,e.getAbility()),s=Dt(i.coeff,t.getAbility());if(e.addTempLog(Tn(e,t,n,i,r,s)),r>=s){const o=Ge(r,t.getAbility().armor);t.health-=o,e.addTempLog(n.messageGenerator(e,t)+'造成了<span style="color: red;">'+Math.round(o)+"</span>点伤害"),n.extraEffect&&n.extraEffect(e,t)}else{const o=Ge(s,e.getAbility().armor);e.health-=o,e.addTempLog(i.messageGenerator(t,e)+'造成了<span style="color: red;">'+Math.round(o)+"</span>点伤害"),i.extraEffect&&i.extraEffect(t,e)}}function ro(e,t,n,i){let r,s,o;i.category===m.None?(r=e,s=t,o=n):(r=t,s=e,o=i);const a=Dt(o.coeff,r.getAbility());e.addTempLog(Tn(e,t,n,i,r instanceof ye?a:0,r instanceof pi?a:0));const c=Ge(a,s.getAbility().armor);s.health-=c,e.addTempLog(o.messageGenerator(r,s)+'造成了<span style="color: red;">'+Math.round(c)+"</span>点伤害"),o.extraEffect&&o.extraEffect(r,s)}function so(e,t,n,i){const r=Dt(n.coeff,e.getAbility()),s=Dt(i.coeff,t.getAbility());e.addTempLog(Tn(e,t,n,i,r,s));const o=n.category===m.Attack,a=o?e:t,c=o?t:e,h=o?n:i,d=o?i:n,_=o?r:s,p=o?s:r,T=_-p>0?_-p:0,z=Ge(T,c.getAbility().armor);c.health-=z,T>0?e.addTempLog(h.messageGenerator(a,c)+`击穿了${c.name}的防御，造成了<span style="color: red;">`+Math.round(z)+`(-${p})</span>点伤害`):e.addTempLog(d.messageGenerator(c,a)+","+h.messageGenerator(a,c)+"但没有造成伤害")}function oo(e,t,n,i){const r=Dt(n.coeff,e.getAbility()),s=Dt(i.coeff,t.getAbility());e.addTempLog(Tn(e,t,n,i,r,s));const o=n.category===m.Attack,a=o?e:t,c=o?t:e,h=o?n:i,d=o?i:n,_=Dt(h.coeff,a.getAbility()),p=Dt(d.coeff,c.getAbility());if(_>p){const T=Ge(_,c.getAbility().armor);return c.health-=T,e.addTempLog(h.messageGenerator(a,c)+"对"+c.name+'造成了<span style="color: red;">'+Math.round(T)+"</span>点伤害"),""}else return e.addTempLog(d.messageGenerator(a,c)+","+a.name+"失衡了"),a instanceof ye?"player":"enemy"}function bn(e,t,n,i,r){var h,d;const s=wt();if(n&&i&&(e.addTempLog("--------------------------回合-----------------------------"),no(e,t,n,i),Bt(e)),e.health<=0){e.addLog(e.name+"撑不住了"),Wi(e,t,!1,r);return}if(t.health<1){e.addLog(e.name+"击败了"+t.name),Wi(e,t,!0,r);return}i=t.getRandomAction();const o=ao(e,t,i),a=e.getRandomAction(),c=e.getRandomAction();s.innerHTML=`
  <div class="container mt-4">
    <h2 class="text-center mb-3">战斗</h2>

    <!-- 敌人信息 -->
    <div class="card mb-3">
      <div class="card-header bg-danger text-white">
        <h4 class="mb-0">${t.name}</h4>
      </div>
      <div class="card-body">
        <p class="card-text fst-italic">"${t.description}"</p>
        <p class="card-text">${o}</p>
        <p class="card-text">HP: <strong>${Math.ceil(t.health)}</strong></p>
      </div>
    </div>

    <!-- 分割线 -->
    <hr>

    <!-- 玩家信息 -->
    <div class="card mb-4">
      <div class="card-header bg-success text-white">
        <h4 class="mb-0">${e.name}</h4>
      </div>
      <div class="card-body">
        <p class="card-text">HP: <strong>${Math.ceil(e.health)}</strong></p>
      </div>
    </div>

    <!-- 动作选择 -->
    <div class="row mb-4">
      <div class="col-6">
        <div class="card bg-primary text-white" id="action1-btn" style="cursor: pointer;">
          <div class="card-body text-center">
            <h5 class="card-title">${a.name}</h5>
            <p class="card-text">${a.description}</p>
            <p class="card-text">${a.hits.map(_=>`${ie(_)}(${We(_.coeff,e.getAbility())}~${ze(_.coeff,e.getAbility())})`).join("<br>")}
            </p>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="card bg-info text-white" id="action2-btn" style="cursor: pointer;">
          <div class="card-body text-center">
            <h5 class="card-title">${c.name}</h5>
            <p class="card-text">${c.description}</p>
            <p class="card-text">${c.hits.map(_=>`${ie(_)}(${We(_.coeff,e.getAbility())}~${ze(_.coeff,e.getAbility())})`).join("<br>")}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- 战斗记录 -->
    <div class="card">
      <div class="card-header">
        记录
      </div>
      <div class="card-body" id="log" style="max-height: 200px; overflow-y: auto;">
        ${e.getTempLogs()}
      </div>
    </div>
  </div>
`,(h=document.getElementById("action1-btn"))==null||h.addEventListener("click",()=>{bn(e,t,a,i,r)}),(d=document.getElementById("action2-btn"))==null||d.addEventListener("click",()=>{bn(e,t,c,i,r)})}function Wi(e,t,n,i){var a;const r=wt();let s=!1,o=null;n?(o=t.randomDropItem(),e.exp+=Math.floor(t.giveExp),s=e.checkLevelUp(),e.exp=Math.floor(e.exp),e.addLog(t.name+"掉落了<span style='color: gold;'>"+((o==null?void 0:o.name)??"无")+"</span>"),o&&e.pack.push(o)):(e.health=1,e.addLog(e.name+"拼死从"+t.name+"的手中逃了出来，拖着残破的身躯，回到了城镇")),r.innerHTML=`
  <div class="container mt-4">
    <div class="card text-center shadow">
      <div class="card-header bg-dark text-white">
        <h2 class="mb-0">战斗结束</h2>
      </div>
      <div class="card-body">
        <h4 class="card-title">
          ${e.name}
          ${n?'<span class="text-success">胜利</span>':'<span class="text-danger">失败</span>'}
          <p>lv: ${e.level}${s?"🔺":""} exp: ${e.exp}/${e.getNextLevelExp()}</p>
          ${n?`<p>获得经验: <span class="text-info">${Math.floor(t.giveExp)}</span>  ${o?`获得物品: <span class="text-${vn(o.rarity)}">${o.name}</span>`:""}</p>`:""}
        </h4>
        <hr>
        <h5>记录</h5>
        <div id="log" class="border rounded p-3" style="max-height: 250px; overflow-y: auto;">
          ${e.getTempLogs()}
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-primary" id="continue-btn">继续</button>
      </div>
    </div>
  </div>
`,e.clearTempLogs(),Bt(e),(a=document.getElementById("continue-btn"))==null||a.addEventListener("click",()=>{i(e,t,n)})}function ze(e,t){return Math.round(e.str*t.str+e.dex*t.dex+e.int*t.int+e.con*t.con+e.siz*t.siz+e.app*t.app)}function We(e,t){return Math.round(ze(e,t)*.1)}function Dt(e,t){return We(e,t)+Math.round((ze(e,t)-We(e,t))*Math.random())}function Ge(e,t){return e*(25/(t+25))}function Tn(e,t,n,i,r,s){let o="",a="";return n.category===m.None?o=n.messageGenerator(e,t):o=e.name+ie(n)+'<span style="color: blue;">'+Math.round(r)+"</span> ",i.category===m.None?a=i.messageGenerator(t,e):a=t.name+ie(i)+'<span style="color: orange;">'+Math.round(s)+"</span> ","掷骰："+o+a}function ao(e,t,n){function i(r,s){return r.name+"看起来似乎会使用"+s.name+"<br>"+s.hits.map(o=>`${ie(o)}(${We(o.coeff,r.getAbility())}~${ze(o.coeff,r.getAbility())})`).join("<br>")}return Math.random()*e.getAbility().dex>Math.random()*t.getAbility().dex?Math.random()*e.getAbility().int>Math.random()*t.getAbility().int?i(t,n):i(t,t.getRandomAction()):"你来不及观察"+t.name+"的行动"}function co(e){let t=Object.values(ut)[Math.floor(Math.random()*Object.values(ut).length)];(t===ut.Player||t===ut.Player114514)&&(t=ut.Wolf);const n=Math.floor(Math.random()*10)+1,i=Math.random()*2,r=new pi(He[t].typeName,t,n,i);bn(e,r,null,null,(s,o,a)=>{Mn(s)})}var st="top",ht="bottom",pt="right",ot="left",Sn="auto",Le=[st,ht,pt,ot],re="start",we="end",Dr="clippingParents",gi="viewport",_e="popper",$r="reference",si=Le.reduce(function(e,t){return e.concat([t+"-"+re,t+"-"+we])},[]),mi=[].concat(Le,[Sn]).reduce(function(e,t){return e.concat([t,t+"-"+re,t+"-"+we])},[]),Mr="beforeRead",kr="read",Ir="afterRead",Pr="beforeMain",Rr="main",jr="afterMain",Hr="beforeWrite",Br="write",zr="afterWrite",Wr=[Mr,kr,Ir,Pr,Rr,jr,Hr,Br,zr];function Lt(e){return e?(e.nodeName||"").toLowerCase():null}function gt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function se(e){var t=gt(e).Element;return e instanceof t||e instanceof Element}function _t(e){var t=gt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function _i(e){if(typeof ShadowRoot>"u")return!1;var t=gt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function lo(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},r=t.attributes[n]||{},s=t.elements[n];!_t(s)||!Lt(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function uo(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=o.reduce(function(c,h){return c[h]="",c},{});!_t(r)||!Lt(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(c){r.removeAttribute(c)}))})}}const vi={name:"applyStyles",enabled:!0,phase:"write",fn:lo,effect:uo,requires:["computeStyles"]};function Ct(e){return e.split("-")[0]}var te=Math.max,En=Math.min,Ae=Math.round;function oi(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Gr(){return!/^((?!chrome|android).)*safari/i.test(oi())}function Te(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,s=1;t&&_t(e)&&(r=e.offsetWidth>0&&Ae(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Ae(i.height)/e.offsetHeight||1);var o=se(e)?gt(e):window,a=o.visualViewport,c=!Gr()&&n,h=(i.left+(c&&a?a.offsetLeft:0))/r,d=(i.top+(c&&a?a.offsetTop:0))/s,_=i.width/r,p=i.height/s;return{width:_,height:p,top:d,right:h+_,bottom:d+p,left:h,x:h,y:d}}function bi(e){var t=Te(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Vr(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&_i(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function kt(e){return gt(e).getComputedStyle(e)}function fo(e){return["table","td","th"].indexOf(Lt(e))>=0}function Ft(e){return((se(e)?e.ownerDocument:e.document)||window.document).documentElement}function On(e){return Lt(e)==="html"?e:e.assignedSlot||e.parentNode||(_i(e)?e.host:null)||Ft(e)}function Gi(e){return!_t(e)||kt(e).position==="fixed"?null:e.offsetParent}function ho(e){var t=/firefox/i.test(oi()),n=/Trident/i.test(oi());if(n&&_t(e)){var i=kt(e);if(i.position==="fixed")return null}var r=On(e);for(_i(r)&&(r=r.host);_t(r)&&["html","body"].indexOf(Lt(r))<0;){var s=kt(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Fe(e){for(var t=gt(e),n=Gi(e);n&&fo(n)&&kt(n).position==="static";)n=Gi(n);return n&&(Lt(n)==="html"||Lt(n)==="body"&&kt(n).position==="static")?t:n||ho(e)||t}function Ei(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Re(e,t,n){return te(e,En(t,n))}function po(e,t,n){var i=Re(e,t,n);return i>n?n:i}function Fr(){return{top:0,right:0,bottom:0,left:0}}function Ur(e){return Object.assign({},Fr(),e)}function Kr(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var go=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Ur(typeof t!="number"?t:Kr(t,Le))};function mo(e){var t,n=e.state,i=e.name,r=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ct(n.placement),c=Ei(a),h=[ot,pt].indexOf(a)>=0,d=h?"height":"width";if(!(!s||!o)){var _=go(r.padding,n),p=bi(s),T=c==="y"?st:ot,z=c==="y"?ht:pt,M=n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d],y=o[c]-n.rects.reference[c],k=Fe(s),P=k?c==="y"?k.clientHeight||0:k.clientWidth||0:0,I=M/2-y/2,N=_[T],O=P-p[d]-_[z],$=P/2-p[d]/2+I,G=Re(N,$,O),j=c;n.modifiersData[i]=(t={},t[j]=G,t.centerOffset=G-$,t)}}function _o(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Vr(t.elements.popper,r)&&(t.elements.arrow=r))}const Yr={name:"arrow",enabled:!0,phase:"main",fn:mo,effect:_o,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Se(e){return e.split("-")[1]}var vo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bo(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Ae(n*r)/r||0,y:Ae(i*r)/r||0}}function Vi(e){var t,n=e.popper,i=e.popperRect,r=e.placement,s=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,h=e.adaptive,d=e.roundOffsets,_=e.isFixed,p=o.x,T=p===void 0?0:p,z=o.y,M=z===void 0?0:z,y=typeof d=="function"?d({x:T,y:M}):{x:T,y:M};T=y.x,M=y.y;var k=o.hasOwnProperty("x"),P=o.hasOwnProperty("y"),I=ot,N=st,O=window;if(h){var $=Fe(n),G="clientHeight",j="clientWidth";if($===gt(n)&&($=Ft(n),kt($).position!=="static"&&a==="absolute"&&(G="scrollHeight",j="scrollWidth")),$=$,r===st||(r===ot||r===pt)&&s===we){N=ht;var q=_&&$===O&&O.visualViewport?O.visualViewport.height:$[G];M-=q-i.height,M*=c?1:-1}if(r===ot||(r===st||r===ht)&&s===we){I=pt;var K=_&&$===O&&O.visualViewport?O.visualViewport.width:$[j];T-=K-i.width,T*=c?1:-1}}var X=Object.assign({position:a},h&&vo),it=d===!0?bo({x:T,y:M},gt(n)):{x:T,y:M};if(T=it.x,M=it.y,c){var Z;return Object.assign({},X,(Z={},Z[N]=P?"0":"",Z[I]=k?"0":"",Z.transform=(O.devicePixelRatio||1)<=1?"translate("+T+"px, "+M+"px)":"translate3d("+T+"px, "+M+"px, 0)",Z))}return Object.assign({},X,(t={},t[N]=P?M+"px":"",t[I]=k?T+"px":"",t.transform="",t))}function Eo(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,c=a===void 0?!0:a,h={placement:Ct(t.placement),variation:Se(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Vi(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vi(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const yi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Eo,data:{}};var an={passive:!0};function yo(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,c=gt(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&h.forEach(function(d){d.addEventListener("scroll",n.update,an)}),a&&c.addEventListener("resize",n.update,an),function(){s&&h.forEach(function(d){d.removeEventListener("scroll",n.update,an)}),a&&c.removeEventListener("resize",n.update,an)}}const wi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yo,data:{}};var wo={left:"right",right:"left",bottom:"top",top:"bottom"};function pn(e){return e.replace(/left|right|bottom|top/g,function(t){return wo[t]})}var Ao={start:"end",end:"start"};function Fi(e){return e.replace(/start|end/g,function(t){return Ao[t]})}function Ai(e){var t=gt(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Ti(e){return Te(Ft(e)).left+Ai(e).scrollLeft}function To(e,t){var n=gt(e),i=Ft(e),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;var h=Gr();(h||!h&&t==="fixed")&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a+Ti(e),y:c}}function So(e){var t,n=Ft(e),i=Ai(e),r=(t=e.ownerDocument)==null?void 0:t.body,s=te(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=te(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Ti(e),c=-i.scrollTop;return kt(r||n).direction==="rtl"&&(a+=te(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}function Si(e){var t=kt(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function qr(e){return["html","body","#document"].indexOf(Lt(e))>=0?e.ownerDocument.body:_t(e)&&Si(e)?e:qr(On(e))}function je(e,t){var n;t===void 0&&(t=[]);var i=qr(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),s=gt(i),o=r?[s].concat(s.visualViewport||[],Si(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(je(On(o)))}function ai(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Oo(e,t){var n=Te(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Ui(e,t,n){return t===gi?ai(To(e,n)):se(t)?Oo(t,n):ai(So(Ft(e)))}function Co(e){var t=je(On(e)),n=["absolute","fixed"].indexOf(kt(e).position)>=0,i=n&&_t(e)?Fe(e):e;return se(i)?t.filter(function(r){return se(r)&&Vr(r,i)&&Lt(r)!=="body"}):[]}function xo(e,t,n,i){var r=t==="clippingParents"?Co(e):[].concat(t),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(c,h){var d=Ui(e,h,i);return c.top=te(d.top,c.top),c.right=En(d.right,c.right),c.bottom=En(d.bottom,c.bottom),c.left=te(d.left,c.left),c},Ui(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Xr(e){var t=e.reference,n=e.element,i=e.placement,r=i?Ct(i):null,s=i?Se(i):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,c;switch(r){case st:c={x:o,y:t.y-n.height};break;case ht:c={x:o,y:t.y+t.height};break;case pt:c={x:t.x+t.width,y:a};break;case ot:c={x:t.x-n.width,y:a};break;default:c={x:t.x,y:t.y}}var h=r?Ei(r):null;if(h!=null){var d=h==="y"?"height":"width";switch(s){case re:c[h]=c[h]-(t[d]/2-n[d]/2);break;case we:c[h]=c[h]+(t[d]/2-n[d]/2);break}}return c}function Oe(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,s=n.strategy,o=s===void 0?e.strategy:s,a=n.boundary,c=a===void 0?Dr:a,h=n.rootBoundary,d=h===void 0?gi:h,_=n.elementContext,p=_===void 0?_e:_,T=n.altBoundary,z=T===void 0?!1:T,M=n.padding,y=M===void 0?0:M,k=Ur(typeof y!="number"?y:Kr(y,Le)),P=p===_e?$r:_e,I=e.rects.popper,N=e.elements[z?P:p],O=xo(se(N)?N:N.contextElement||Ft(e.elements.popper),c,d,o),$=Te(e.elements.reference),G=Xr({reference:$,element:I,placement:r}),j=ai(Object.assign({},I,G)),q=p===_e?j:$,K={top:O.top-q.top+k.top,bottom:q.bottom-O.bottom+k.bottom,left:O.left-q.left+k.left,right:q.right-O.right+k.right},X=e.modifiersData.offset;if(p===_e&&X){var it=X[r];Object.keys(K).forEach(function(Z){var mt=[pt,ht].indexOf(Z)>=0?1:-1,rt=[st,ht].indexOf(Z)>=0?"y":"x";K[Z]+=it[rt]*mt})}return K}function Lo(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,h=c===void 0?mi:c,d=Se(i),_=d?a?si:si.filter(function(z){return Se(z)===d}):Le,p=_.filter(function(z){return h.indexOf(z)>=0});p.length===0&&(p=_);var T=p.reduce(function(z,M){return z[M]=Oe(e,{placement:M,boundary:r,rootBoundary:s,padding:o})[Ct(M)],z},{});return Object.keys(T).sort(function(z,M){return T[z]-T[M]})}function No(e){if(Ct(e)===Sn)return[];var t=pn(e);return[Fi(e),t,Fi(t)]}function Do(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,c=n.fallbackPlacements,h=n.padding,d=n.boundary,_=n.rootBoundary,p=n.altBoundary,T=n.flipVariations,z=T===void 0?!0:T,M=n.allowedAutoPlacements,y=t.options.placement,k=Ct(y),P=k===y,I=c||(P||!z?[pn(y)]:No(y)),N=[y].concat(I).reduce(function(ft,St){return ft.concat(Ct(St)===Sn?Lo(t,{placement:St,boundary:d,rootBoundary:_,padding:h,flipVariations:z,allowedAutoPlacements:M}):St)},[]),O=t.rects.reference,$=t.rects.popper,G=new Map,j=!0,q=N[0],K=0;K<N.length;K++){var X=N[K],it=Ct(X),Z=Se(X)===re,mt=[st,ht].indexOf(it)>=0,rt=mt?"width":"height",R=Oe(t,{placement:X,boundary:d,rootBoundary:_,altBoundary:p,padding:h}),Y=mt?Z?pt:ot:Z?ht:st;O[rt]>$[rt]&&(Y=pn(Y));var Yt=pn(Y),Tt=[];if(s&&Tt.push(R[it]<=0),a&&Tt.push(R[Y]<=0,R[Yt]<=0),Tt.every(function(ft){return ft})){q=X,j=!1;break}G.set(X,Tt)}if(j)for(var qt=z?3:1,ce=function(St){var F=N.find(function(le){var Nt=G.get(le);if(Nt)return Nt.slice(0,St).every(function(ue){return ue})});if(F)return q=F,"break"},Pt=qt;Pt>0;Pt--){var x=ce(Pt);if(x==="break")break}t.placement!==q&&(t.modifiersData[i]._skip=!0,t.placement=q,t.reset=!0)}}const Qr={name:"flip",enabled:!0,phase:"main",fn:Do,requiresIfExists:["offset"],data:{_skip:!1}};function Ki(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Yi(e){return[st,pt,ht,ot].some(function(t){return e[t]>=0})}function $o(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=Oe(t,{elementContext:"reference"}),a=Oe(t,{altBoundary:!0}),c=Ki(o,i),h=Ki(a,r,s),d=Yi(c),_=Yi(h);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:_},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":_})}const Jr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$o};function Mo(e,t,n){var i=Ct(e),r=[ot,st].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[ot,pt].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function ko(e){var t=e.state,n=e.options,i=e.name,r=n.offset,s=r===void 0?[0,0]:r,o=mi.reduce(function(d,_){return d[_]=Mo(_,t.rects,s),d},{}),a=o[t.placement],c=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[i]=o}const Zr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ko};function Io(e){var t=e.state,n=e.name;t.modifiersData[n]=Xr({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Oi={name:"popperOffsets",enabled:!0,phase:"read",fn:Io,data:{}};function Po(e){return e==="x"?"y":"x"}function Ro(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,_=n.padding,p=n.tether,T=p===void 0?!0:p,z=n.tetherOffset,M=z===void 0?0:z,y=Oe(t,{boundary:c,rootBoundary:h,padding:_,altBoundary:d}),k=Ct(t.placement),P=Se(t.placement),I=!P,N=Ei(k),O=Po(N),$=t.modifiersData.popperOffsets,G=t.rects.reference,j=t.rects.popper,q=typeof M=="function"?M(Object.assign({},t.rects,{placement:t.placement})):M,K=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),X=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,it={x:0,y:0};if($){if(s){var Z,mt=N==="y"?st:ot,rt=N==="y"?ht:pt,R=N==="y"?"height":"width",Y=$[N],Yt=Y+y[mt],Tt=Y-y[rt],qt=T?-j[R]/2:0,ce=P===re?G[R]:j[R],Pt=P===re?-j[R]:-G[R],x=t.elements.arrow,ft=T&&x?bi(x):{width:0,height:0},St=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Fr(),F=St[mt],le=St[rt],Nt=Re(0,G[R],ft[R]),ue=I?G[R]/2-qt-Nt-F-K.mainAxis:ce-Nt-F-K.mainAxis,kn=I?-G[R]/2+qt+Nt+le+K.mainAxis:Pt+Nt+le+K.mainAxis,at=t.elements.arrow&&Fe(t.elements.arrow),Xe=at?N==="y"?at.clientTop||0:at.clientLeft||0:0,Xt=(Z=X==null?void 0:X[N])!=null?Z:0,Qe=Y+ue-Xt-Xe,In=Y+kn-Xt,de=Re(T?En(Yt,Qe):Yt,Y,T?te(Tt,In):Tt);$[N]=de,it[N]=de-Y}if(a){var $e,Je=N==="x"?st:ot,Ze=N==="x"?ht:pt,Ot=$[O],Qt=O==="y"?"height":"width",fe=Ot+y[Je],tn=Ot-y[Ze],Me=[st,ot].indexOf(k)!==-1,en=($e=X==null?void 0:X[O])!=null?$e:0,nn=Me?fe:Ot-G[Qt]-j[Qt]-en+K.altAxis,Rt=Me?Ot+G[Qt]+j[Qt]-en-K.altAxis:tn,rn=T&&Me?po(nn,Ot,Rt):Re(T?nn:fe,Ot,T?Rt:tn);$[O]=rn,it[O]=rn-Ot}t.modifiersData[i]=it}}const ts={name:"preventOverflow",enabled:!0,phase:"main",fn:Ro,requiresIfExists:["offset"]};function jo(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ho(e){return e===gt(e)||!_t(e)?Ai(e):jo(e)}function Bo(e){var t=e.getBoundingClientRect(),n=Ae(t.width)/e.offsetWidth||1,i=Ae(t.height)/e.offsetHeight||1;return n!==1||i!==1}function zo(e,t,n){n===void 0&&(n=!1);var i=_t(t),r=_t(t)&&Bo(t),s=Ft(t),o=Te(e,r,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!n)&&((Lt(t)!=="body"||Si(s))&&(a=Ho(t)),_t(t)?(c=Te(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=Ti(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function Wo(e){var t=new Map,n=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var c=t.get(a);c&&r(c)}}),i.push(s)}return e.forEach(function(s){n.has(s.name)||r(s)}),i}function Go(e){var t=Wo(e);return Wr.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function Vo(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Fo(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var qi={placement:"bottom",modifiers:[],strategy:"absolute"};function Xi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Cn(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,s=r===void 0?qi:r;return function(a,c,h){h===void 0&&(h=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},qi,s),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},_=[],p=!1,T={state:d,setOptions:function(k){var P=typeof k=="function"?k(d.options):k;M(),d.options=Object.assign({},s,d.options,P),d.scrollParents={reference:se(a)?je(a):a.contextElement?je(a.contextElement):[],popper:je(c)};var I=Go(Fo([].concat(i,d.options.modifiers)));return d.orderedModifiers=I.filter(function(N){return N.enabled}),z(),T.update()},forceUpdate:function(){if(!p){var k=d.elements,P=k.reference,I=k.popper;if(Xi(P,I)){d.rects={reference:zo(P,Fe(I),d.options.strategy==="fixed"),popper:bi(I)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(K){return d.modifiersData[K.name]=Object.assign({},K.data)});for(var N=0;N<d.orderedModifiers.length;N++){if(d.reset===!0){d.reset=!1,N=-1;continue}var O=d.orderedModifiers[N],$=O.fn,G=O.options,j=G===void 0?{}:G,q=O.name;typeof $=="function"&&(d=$({state:d,options:j,name:q,instance:T})||d)}}}},update:Vo(function(){return new Promise(function(y){T.forceUpdate(),y(d)})}),destroy:function(){M(),p=!0}};if(!Xi(a,c))return T;T.setOptions(h).then(function(y){!p&&h.onFirstUpdate&&h.onFirstUpdate(y)});function z(){d.orderedModifiers.forEach(function(y){var k=y.name,P=y.options,I=P===void 0?{}:P,N=y.effect;if(typeof N=="function"){var O=N({state:d,name:k,instance:T,options:I}),$=function(){};_.push(O||$)}})}function M(){_.forEach(function(y){return y()}),_=[]}return T}}var Uo=Cn(),Ko=[wi,Oi,yi,vi],Yo=Cn({defaultModifiers:Ko}),qo=[wi,Oi,yi,vi,Zr,Qr,ts,Yr,Jr],Ci=Cn({defaultModifiers:qo});const es=Object.freeze(Object.defineProperty({__proto__:null,afterMain:jr,afterRead:Ir,afterWrite:zr,applyStyles:vi,arrow:Yr,auto:Sn,basePlacements:Le,beforeMain:Pr,beforeRead:Mr,beforeWrite:Hr,bottom:ht,clippingParents:Dr,computeStyles:yi,createPopper:Ci,createPopperBase:Uo,createPopperLite:Yo,detectOverflow:Oe,end:we,eventListeners:wi,flip:Qr,hide:Jr,left:ot,main:Rr,modifierPhases:Wr,offset:Zr,placements:mi,popper:_e,popperGenerator:Cn,popperOffsets:Oi,preventOverflow:ts,read:kr,reference:$r,right:pt,start:re,top:st,variationPlacements:si,viewport:gi,write:Br},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const jt=new Map,Bn={set(e,t,n){jt.has(e)||jt.set(e,new Map);const i=jt.get(e);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,n)},get(e,t){return jt.has(e)&&jt.get(e).get(t)||null},remove(e,t){if(!jt.has(e))return;const n=jt.get(e);n.delete(t),n.size===0&&jt.delete(e)}},Xo=1e6,Qo=1e3,ci="transitionend",ns=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),Jo=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Zo=e=>{do e+=Math.floor(Math.random()*Xo);while(document.getElementById(e));return e},ta=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),r=Number.parseFloat(n);return!i&&!r?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*Qo)},is=e=>{e.dispatchEvent(new Event(ci))},$t=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),zt=e=>$t(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(ns(e)):null,Ne=e=>{if(!$t(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const i=e.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return t},Wt=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",rs=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?rs(e.parentNode):null},yn=()=>{},Ue=e=>{e.offsetHeight},ss=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,zn=[],ea=e=>{document.readyState==="loading"?(zn.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of zn)t()}),zn.push(e)):e()},vt=()=>document.documentElement.dir==="rtl",Et=e=>{ea(()=>{const t=ss();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}})},dt=(e,t=[],n=e)=>typeof e=="function"?e(...t):n,os=(e,t,n=!0)=>{if(!n){dt(e);return}const r=ta(t)+5;let s=!1;const o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(ci,o),dt(e))};t.addEventListener(ci,o),setTimeout(()=>{s||is(t)},r)},xi=(e,t,n,i)=>{const r=e.length;let s=e.indexOf(t);return s===-1?!n&&i?e[r-1]:e[0]:(s+=n?1:-1,i&&(s=(s+r)%r),e[Math.max(0,Math.min(s,r-1))])},na=/[^.]*(?=\..*)\.|.*/,ia=/\..*/,ra=/::\d+$/,Wn={};let Qi=1;const as={mouseenter:"mouseover",mouseleave:"mouseout"},sa=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function cs(e,t){return t&&`${t}::${Qi++}`||e.uidEvent||Qi++}function ls(e){const t=cs(e);return e.uidEvent=t,Wn[t]=Wn[t]||{},Wn[t]}function oa(e,t){return function n(i){return Li(i,{delegateTarget:e}),n.oneOff&&g.off(e,i.type,t),t.apply(e,[i])}}function aa(e,t,n){return function i(r){const s=e.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Li(r,{delegateTarget:o}),i.oneOff&&g.off(e,r.type,t,n),n.apply(o,[r])}}function us(e,t,n=null){return Object.values(e).find(i=>i.callable===t&&i.delegationSelector===n)}function ds(e,t,n){const i=typeof t=="string",r=i?n:t||n;let s=fs(e);return sa.has(s)||(s=e),[i,r,s]}function Ji(e,t,n,i,r){if(typeof t!="string"||!e)return;let[s,o,a]=ds(t,n,i);t in as&&(o=(z=>function(M){if(!M.relatedTarget||M.relatedTarget!==M.delegateTarget&&!M.delegateTarget.contains(M.relatedTarget))return z.call(this,M)})(o));const c=ls(e),h=c[a]||(c[a]={}),d=us(h,o,s?n:null);if(d){d.oneOff=d.oneOff&&r;return}const _=cs(o,t.replace(na,"")),p=s?aa(e,n,o):oa(e,o);p.delegationSelector=s?n:null,p.callable=o,p.oneOff=r,p.uidEvent=_,h[_]=p,e.addEventListener(a,p,s)}function li(e,t,n,i,r){const s=us(t[n],i,r);s&&(e.removeEventListener(n,s,!!r),delete t[n][s.uidEvent])}function ca(e,t,n,i){const r=t[n]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&li(e,t,n,o.callable,o.delegationSelector)}function fs(e){return e=e.replace(ia,""),as[e]||e}const g={on(e,t,n,i){Ji(e,t,n,i,!1)},one(e,t,n,i){Ji(e,t,n,i,!0)},off(e,t,n,i){if(typeof t!="string"||!e)return;const[r,s,o]=ds(t,n,i),a=o!==t,c=ls(e),h=c[o]||{},d=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(h).length)return;li(e,c,o,s,r?n:null);return}if(d)for(const _ of Object.keys(c))ca(e,c,_,t.slice(1));for(const[_,p]of Object.entries(h)){const T=_.replace(ra,"");(!a||t.includes(T))&&li(e,c,o,p.callable,p.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const i=ss(),r=fs(t),s=t!==r;let o=null,a=!0,c=!0,h=!1;s&&i&&(o=i.Event(t,n),i(e).trigger(o),a=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),h=o.isDefaultPrevented());const d=Li(new Event(t,{bubbles:a,cancelable:!0}),n);return h&&d.preventDefault(),c&&e.dispatchEvent(d),d.defaultPrevented&&o&&o.preventDefault(),d}};function Li(e,t={}){for(const[n,i]of Object.entries(t))try{e[n]=i}catch{Object.defineProperty(e,n,{configurable:!0,get(){return i}})}return e}function Zi(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function Gn(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Mt={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${Gn(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${Gn(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=Zi(e.dataset[i])}return t},getDataAttribute(e,t){return Zi(e.getAttribute(`data-bs-${Gn(t)}`))}};class Ke{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const i=$t(n)?Mt.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...$t(n)?Mt.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[i,r]of Object.entries(n)){const s=t[i],o=$t(s)?"element":Jo(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}}const la="5.3.3";class At extends Ke{constructor(t,n){super(),t=zt(t),t&&(this._element=t,this._config=this._getConfig(n),Bn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Bn.remove(this._element,this.constructor.DATA_KEY),g.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,i=!0){os(t,n,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Bn.get(zt(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return la}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Vn=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>ns(n)).join(","):null},C={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!Wt(n)&&Ne(n))},getSelectorFromElement(e){const t=Vn(e);return t&&C.findOne(t)?t:null},getElementFromSelector(e){const t=Vn(e);return t?C.findOne(t):null},getMultipleElementsFromSelector(e){const t=Vn(e);return t?C.find(t):[]}},xn=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;g.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Wt(this))return;const s=C.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(s)[t]()})},ua="alert",da="bs.alert",hs=`.${da}`,fa=`close${hs}`,ha=`closed${hs}`,pa="fade",ga="show";class Ln extends At{static get NAME(){return ua}close(){if(g.trigger(this._element,fa).defaultPrevented)return;this._element.classList.remove(ga);const n=this._element.classList.contains(pa);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),g.trigger(this._element,ha),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=Ln.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}xn(Ln,"close");Et(Ln);const ma="button",_a="bs.button",va=`.${_a}`,ba=".data-api",Ea="active",tr='[data-bs-toggle="button"]',ya=`click${va}${ba}`;class Nn extends At{static get NAME(){return ma}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ea))}static jQueryInterface(t){return this.each(function(){const n=Nn.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}g.on(document,ya,tr,e=>{e.preventDefault();const t=e.target.closest(tr);Nn.getOrCreateInstance(t).toggle()});Et(Nn);const wa="swipe",De=".bs.swipe",Aa=`touchstart${De}`,Ta=`touchmove${De}`,Sa=`touchend${De}`,Oa=`pointerdown${De}`,Ca=`pointerup${De}`,xa="touch",La="pen",Na="pointer-event",Da=40,$a={endCallback:null,leftCallback:null,rightCallback:null},Ma={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class wn extends Ke{constructor(t,n){super(),this._element=t,!(!t||!wn.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return $a}static get DefaultType(){return Ma}static get NAME(){return wa}dispose(){g.off(this._element,De)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),dt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Da)return;const n=t/this._deltaX;this._deltaX=0,n&&dt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(g.on(this._element,Oa,t=>this._start(t)),g.on(this._element,Ca,t=>this._end(t)),this._element.classList.add(Na)):(g.on(this._element,Aa,t=>this._start(t)),g.on(this._element,Ta,t=>this._move(t)),g.on(this._element,Sa,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===La||t.pointerType===xa)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ka="carousel",Ia="bs.carousel",Ut=`.${Ia}`,ps=".data-api",Pa="ArrowLeft",Ra="ArrowRight",ja=500,Ie="next",ge="prev",ve="left",gn="right",Ha=`slide${Ut}`,Fn=`slid${Ut}`,Ba=`keydown${Ut}`,za=`mouseenter${Ut}`,Wa=`mouseleave${Ut}`,Ga=`dragstart${Ut}`,Va=`load${Ut}${ps}`,Fa=`click${Ut}${ps}`,gs="carousel",cn="active",Ua="slide",Ka="carousel-item-end",Ya="carousel-item-start",qa="carousel-item-next",Xa="carousel-item-prev",ms=".active",_s=".carousel-item",Qa=ms+_s,Ja=".carousel-item img",Za=".carousel-indicators",tc="[data-bs-slide], [data-bs-slide-to]",ec='[data-bs-ride="carousel"]',nc={[Pa]:gn,[Ra]:ve},ic={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},rc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ye extends At{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=C.findOne(Za,this._element),this._addEventListeners(),this._config.ride===gs&&this.cycle()}static get Default(){return ic}static get DefaultType(){return rc}static get NAME(){return ka}next(){this._slide(Ie)}nextWhenVisible(){!document.hidden&&Ne(this._element)&&this.next()}prev(){this._slide(ge)}pause(){this._isSliding&&is(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){g.one(this._element,Fn,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){g.one(this._element,Fn,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const r=t>i?Ie:ge;this._slide(r,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&g.on(this._element,Ba,t=>this._keydown(t)),this._config.pause==="hover"&&(g.on(this._element,za,()=>this.pause()),g.on(this._element,Wa,()=>this._maybeEnableCycle())),this._config.touch&&wn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of C.find(Ja,this._element))g.on(i,Ga,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(ve)),rightCallback:()=>this._slide(this._directionToOrder(gn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),ja+this._config.interval))}};this._swipeHelper=new wn(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=nc[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=C.findOne(ms,this._indicatorsElement);n.classList.remove(cn),n.removeAttribute("aria-current");const i=C.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(cn),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const i=this._getActive(),r=t===Ie,s=n||xi(this._getItems(),i,r,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),a=T=>g.trigger(this._element,T,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(Ha).defaultPrevented||!i||!s)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const d=r?Ya:Ka,_=r?qa:Xa;s.classList.add(_),Ue(s),i.classList.add(d),s.classList.add(d);const p=()=>{s.classList.remove(d,_),s.classList.add(cn),i.classList.remove(cn,_,d),this._isSliding=!1,a(Fn)};this._queueCallback(p,i,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(Ua)}_getActive(){return C.findOne(Qa,this._element)}_getItems(){return C.find(_s,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return vt()?t===ve?ge:Ie:t===ve?Ie:ge}_orderToDirection(t){return vt()?t===ge?ve:gn:t===ge?gn:ve}static jQueryInterface(t){return this.each(function(){const n=Ye.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}g.on(document,Fa,tc,function(e){const t=C.getElementFromSelector(this);if(!t||!t.classList.contains(gs))return;e.preventDefault();const n=Ye.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(Mt.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});g.on(window,Va,()=>{const e=C.find(ec);for(const t of e)Ye.getOrCreateInstance(t)});Et(Ye);const sc="collapse",oc="bs.collapse",qe=`.${oc}`,ac=".data-api",cc=`show${qe}`,lc=`shown${qe}`,uc=`hide${qe}`,dc=`hidden${qe}`,fc=`click${qe}${ac}`,Un="show",Ee="collapse",ln="collapsing",hc="collapsed",pc=`:scope .${Ee} .${Ee}`,gc="collapse-horizontal",mc="width",_c="height",vc=".collapse.show, .collapse.collapsing",ui='[data-bs-toggle="collapse"]',bc={parent:null,toggle:!0},Ec={parent:"(null|element)",toggle:"boolean"};class Ve extends At{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const i=C.find(ui);for(const r of i){const s=C.getSelectorFromElement(r),o=C.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return bc}static get DefaultType(){return Ec}static get NAME(){return sc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(vc).filter(a=>a!==this._element).map(a=>Ve.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||g.trigger(this._element,cc).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(Ee),this._element.classList.add(ln),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(ln),this._element.classList.add(Ee,Un),this._element.style[i]="",g.trigger(this._element,lc)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||g.trigger(this._element,uc).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Ue(this._element),this._element.classList.add(ln),this._element.classList.remove(Ee,Un);for(const r of this._triggerArray){const s=C.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(ln),this._element.classList.add(Ee),g.trigger(this._element,dc)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Un)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=zt(t.parent),t}_getDimension(){return this._element.classList.contains(gc)?mc:_c}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ui);for(const n of t){const i=C.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(t){const n=C.find(pc,this._config.parent);return C.find(t,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const i of t)i.classList.toggle(hc,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const i=Ve.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}g.on(document,fc,ui,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of C.getMultipleElementsFromSelector(this))Ve.getOrCreateInstance(t,{toggle:!1}).toggle()});Et(Ve);const er="dropdown",yc="bs.dropdown",oe=`.${yc}`,Ni=".data-api",wc="Escape",nr="Tab",Ac="ArrowUp",ir="ArrowDown",Tc=2,Sc=`hide${oe}`,Oc=`hidden${oe}`,Cc=`show${oe}`,xc=`shown${oe}`,vs=`click${oe}${Ni}`,bs=`keydown${oe}${Ni}`,Lc=`keyup${oe}${Ni}`,be="show",Nc="dropup",Dc="dropend",$c="dropstart",Mc="dropup-center",kc="dropdown-center",Jt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ic=`${Jt}.${be}`,mn=".dropdown-menu",Pc=".navbar",Rc=".navbar-nav",jc=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Hc=vt()?"top-end":"top-start",Bc=vt()?"top-start":"top-end",zc=vt()?"bottom-end":"bottom-start",Wc=vt()?"bottom-start":"bottom-end",Gc=vt()?"left-start":"right-start",Vc=vt()?"right-start":"left-start",Fc="top",Uc="bottom",Kc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Yc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class xt extends At{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=C.next(this._element,mn)[0]||C.prev(this._element,mn)[0]||C.findOne(mn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Kc}static get DefaultType(){return Yc}static get NAME(){return er}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Wt(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!g.trigger(this._element,Cc,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Rc))for(const i of[].concat(...document.body.children))g.on(i,"mouseover",yn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(be),this._element.classList.add(be),g.trigger(this._element,xc,t)}}hide(){if(Wt(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!g.trigger(this._element,Sc,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))g.off(i,"mouseover",yn);this._popper&&this._popper.destroy(),this._menu.classList.remove(be),this._element.classList.remove(be),this._element.setAttribute("aria-expanded","false"),Mt.removeDataAttribute(this._menu,"popper"),g.trigger(this._element,Oc,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!$t(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${er.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof es>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:$t(this._config.reference)?t=zt(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=Ci(t,this._menu,n)}_isShown(){return this._menu.classList.contains(be)}_getPlacement(){const t=this._parent;if(t.classList.contains(Dc))return Gc;if(t.classList.contains($c))return Vc;if(t.classList.contains(Mc))return Fc;if(t.classList.contains(kc))return Uc;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Nc)?n?Bc:Hc:n?Wc:zc}_detectNavbar(){return this._element.closest(Pc)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Mt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...dt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const i=C.find(jc,this._menu).filter(r=>Ne(r));i.length&&xi(i,n,t===ir,!i.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=xt.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===Tc||t.type==="keyup"&&t.key!==nr)return;const n=C.find(Ic);for(const i of n){const r=xt.getInstance(i);if(!r||r._config.autoClose===!1)continue;const s=t.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===nr||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:r._element};t.type==="click"&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),i=t.key===wc,r=[Ac,ir].includes(t.key);if(!r&&!i||n&&!i)return;t.preventDefault();const s=this.matches(Jt)?this:C.prev(this,Jt)[0]||C.next(this,Jt)[0]||C.findOne(Jt,t.delegateTarget.parentNode),o=xt.getOrCreateInstance(s);if(r){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}g.on(document,bs,Jt,xt.dataApiKeydownHandler);g.on(document,bs,mn,xt.dataApiKeydownHandler);g.on(document,vs,xt.clearMenus);g.on(document,Lc,xt.clearMenus);g.on(document,vs,Jt,function(e){e.preventDefault(),xt.getOrCreateInstance(this).toggle()});Et(xt);const Es="backdrop",qc="fade",rr="show",sr=`mousedown.bs.${Es}`,Xc={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ys extends Ke{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Xc}static get DefaultType(){return Qc}static get NAME(){return Es}show(t){if(!this._config.isVisible){dt(t);return}this._append();const n=this._getElement();this._config.isAnimated&&Ue(n),n.classList.add(rr),this._emulateAnimation(()=>{dt(t)})}hide(t){if(!this._config.isVisible){dt(t);return}this._getElement().classList.remove(rr),this._emulateAnimation(()=>{this.dispose(),dt(t)})}dispose(){this._isAppended&&(g.off(this._element,sr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(qc),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=zt(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),g.on(t,sr,()=>{dt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){os(t,this._getElement(),this._config.isAnimated)}}const Jc="focustrap",Zc="bs.focustrap",An=`.${Zc}`,tl=`focusin${An}`,el=`keydown.tab${An}`,nl="Tab",il="forward",or="backward",rl={autofocus:!0,trapElement:null},sl={autofocus:"boolean",trapElement:"element"};class ws extends Ke{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return rl}static get DefaultType(){return sl}static get NAME(){return Jc}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),g.off(document,An),g.on(document,tl,t=>this._handleFocusin(t)),g.on(document,el,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,g.off(document,An))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const i=C.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===or?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===nl&&(this._lastTabNavDirection=t.shiftKey?or:il)}}const ar=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cr=".sticky-top",un="padding-right",lr="margin-right";class di{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,un,n=>n+t),this._setElementAttributes(ar,un,n=>n+t),this._setElementAttributes(cr,lr,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,un),this._resetElementAttributes(ar,un),this._resetElementAttributes(cr,lr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,i){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);const a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,n){const i=t.style.getPropertyValue(n);i&&Mt.setDataAttribute(t,n,i)}_resetElementAttributes(t,n){const i=r=>{const s=Mt.getDataAttribute(r,n);if(s===null){r.style.removeProperty(n);return}Mt.removeDataAttribute(r,n),r.style.setProperty(n,s)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,n){if($t(t)){n(t);return}for(const i of C.find(t,this._element))n(i)}}const ol="modal",al="bs.modal",bt=`.${al}`,cl=".data-api",ll="Escape",ul=`hide${bt}`,dl=`hidePrevented${bt}`,As=`hidden${bt}`,Ts=`show${bt}`,fl=`shown${bt}`,hl=`resize${bt}`,pl=`click.dismiss${bt}`,gl=`mousedown.dismiss${bt}`,ml=`keydown.dismiss${bt}`,_l=`click${bt}${cl}`,ur="modal-open",vl="fade",dr="show",Kn="modal-static",bl=".modal.show",El=".modal-dialog",yl=".modal-body",wl='[data-bs-toggle="modal"]',Al={backdrop:!0,focus:!0,keyboard:!0},Tl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ce extends At{constructor(t,n){super(t,n),this._dialog=C.findOne(El,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new di,this._addEventListeners()}static get Default(){return Al}static get DefaultType(){return Tl}static get NAME(){return ol}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||g.trigger(this._element,Ts,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ur),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||g.trigger(this._element,ul).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(dr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){g.off(window,bt),g.off(this._dialog,bt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ys({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ws({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=C.findOne(yl,this._dialog);n&&(n.scrollTop=0),Ue(this._element),this._element.classList.add(dr);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,g.trigger(this._element,fl,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){g.on(this._element,ml,t=>{if(t.key===ll){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),g.on(window,hl,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),g.on(this._element,gl,t=>{g.one(this._element,pl,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ur),this._resetAdjustments(),this._scrollBar.reset(),g.trigger(this._element,As)})}_isAnimated(){return this._element.classList.contains(vl)}_triggerBackdropTransition(){if(g.trigger(this._element,dl).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Kn)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Kn),this._queueCallback(()=>{this._element.classList.remove(Kn),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!t){const r=vt()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&t){const r=vt()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const i=Ce.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](n)}})}}g.on(document,_l,wl,function(e){const t=C.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),g.one(t,Ts,r=>{r.defaultPrevented||g.one(t,As,()=>{Ne(this)&&this.focus()})});const n=C.findOne(bl);n&&Ce.getInstance(n).hide(),Ce.getOrCreateInstance(t).toggle(this)});xn(Ce);Et(Ce);const Sl="offcanvas",Ol="bs.offcanvas",It=`.${Ol}`,Ss=".data-api",Cl=`load${It}${Ss}`,xl="Escape",fr="show",hr="showing",pr="hiding",Ll="offcanvas-backdrop",Os=".offcanvas.show",Nl=`show${It}`,Dl=`shown${It}`,$l=`hide${It}`,gr=`hidePrevented${It}`,Cs=`hidden${It}`,Ml=`resize${It}`,kl=`click${It}${Ss}`,Il=`keydown.dismiss${It}`,Pl='[data-bs-toggle="offcanvas"]',Rl={backdrop:!0,keyboard:!0,scroll:!1},jl={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Gt extends At{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Rl}static get DefaultType(){return jl}static get NAME(){return Sl}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||g.trigger(this._element,Nl,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new di().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(hr);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(fr),this._element.classList.remove(hr),g.trigger(this._element,Dl,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||g.trigger(this._element,$l).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(pr),this._backdrop.hide();const n=()=>{this._element.classList.remove(fr,pr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new di().reset(),g.trigger(this._element,Cs)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){g.trigger(this._element,gr);return}this.hide()},n=!!this._config.backdrop;return new ys({className:Ll,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new ws({trapElement:this._element})}_addEventListeners(){g.on(this._element,Il,t=>{if(t.key===xl){if(this._config.keyboard){this.hide();return}g.trigger(this._element,gr)}})}static jQueryInterface(t){return this.each(function(){const n=Gt.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}g.on(document,kl,Pl,function(e){const t=C.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Wt(this))return;g.one(t,Cs,()=>{Ne(this)&&this.focus()});const n=C.findOne(Os);n&&n!==t&&Gt.getInstance(n).hide(),Gt.getOrCreateInstance(t).toggle(this)});g.on(window,Cl,()=>{for(const e of C.find(Os))Gt.getOrCreateInstance(e).show()});g.on(window,Ml,()=>{for(const e of C.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&Gt.getOrCreateInstance(e).hide()});xn(Gt);Et(Gt);const Hl=/^aria-[\w-]*$/i,xs={"*":["class","dir","id","lang","role",Hl],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Bl=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),zl=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Wl=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?Bl.has(n)?!!zl.test(e.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function Gl(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const r=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const c=[].concat(...o.attributes),h=[].concat(t["*"]||[],t[a]||[]);for(const d of c)Wl(d,h)||o.removeAttribute(d.nodeName)}return r.body.innerHTML}const Vl="TemplateFactory",Fl={allowList:xs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ul={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Kl={entry:"(string|element|function|null)",selector:"(string|element)"};class Yl extends Ke{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Fl}static get DefaultType(){return Ul}static get NAME(){return Vl}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(t,s,r);const n=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,i]of Object.entries(t))super._typeCheckConfig({selector:n,entry:i},Kl)}_setContent(t,n,i){const r=C.findOne(i,t);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if($t(n)){this._putElementInTemplate(zt(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(t){return this._config.sanitize?Gl(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return dt(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const ql="tooltip",Xl=new Set(["sanitize","allowList","sanitizeFn"]),Yn="fade",Ql="modal",dn="show",Jl=".tooltip-inner",mr=`.${Ql}`,_r="hide.bs.modal",Pe="hover",qn="focus",Zl="click",tu="manual",eu="hide",nu="hidden",iu="show",ru="shown",su="inserted",ou="click",au="focusin",cu="focusout",lu="mouseenter",uu="mouseleave",du={AUTO:"auto",TOP:"top",RIGHT:vt()?"left":"right",BOTTOM:"bottom",LEFT:vt()?"right":"left"},fu={allowList:xs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},hu={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Vt extends At{constructor(t,n){if(typeof es>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return fu}static get DefaultType(){return hu}static get NAME(){return ql}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),g.off(this._element.closest(mr),_r,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=g.trigger(this._element,this.constructor.eventName(iu)),i=(rs(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),g.trigger(this._element,this.constructor.eventName(su))),this._popper=this._createPopper(r),r.classList.add(dn),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))g.on(a,"mouseover",yn);const o=()=>{g.trigger(this._element,this.constructor.eventName(ru)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||g.trigger(this._element,this.constructor.eventName(eu)).defaultPrevented)return;if(this._getTipElement().classList.remove(dn),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))g.off(r,"mouseover",yn);this._activeTrigger[Zl]=!1,this._activeTrigger[qn]=!1,this._activeTrigger[Pe]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),g.trigger(this._element,this.constructor.eventName(nu)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Yn,dn),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Zo(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(Yn),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Yl({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Jl]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Yn)}_isShown(){return this.tip&&this.tip.classList.contains(dn)}_createPopper(t){const n=dt(this._config.placement,[this,t,this._element]),i=du[n.toUpperCase()];return Ci(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return dt(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...dt(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")g.on(this._element,this.constructor.eventName(ou),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==tu){const i=n===Pe?this.constructor.eventName(lu):this.constructor.eventName(au),r=n===Pe?this.constructor.eventName(uu):this.constructor.eventName(cu);g.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?qn:Pe]=!0,o._enter()}),g.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?qn:Pe]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},g.on(this._element.closest(mr),_r,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Mt.getDataAttributes(this._element);for(const i of Object.keys(n))Xl.has(i)&&delete n[i];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:zt(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(t[n]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=Vt.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Et(Vt);const pu="popover",gu=".popover-header",mu=".popover-body",_u={...Vt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},vu={...Vt.DefaultType,content:"(null|string|element|function)"};class Di extends Vt{static get Default(){return _u}static get DefaultType(){return vu}static get NAME(){return pu}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[gu]:this._getTitle(),[mu]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=Di.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Et(Di);const bu="scrollspy",Eu="bs.scrollspy",$i=`.${Eu}`,yu=".data-api",wu=`activate${$i}`,vr=`click${$i}`,Au=`load${$i}${yu}`,Tu="dropdown-item",me="active",Su='[data-bs-spy="scroll"]',Xn="[href]",Ou=".nav, .list-group",br=".nav-link",Cu=".nav-item",xu=".list-group-item",Lu=`${br}, ${Cu} > ${br}, ${xu}`,Nu=".dropdown",Du=".dropdown-toggle",$u={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Mu={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Dn extends At{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return $u}static get DefaultType(){return Mu}static get NAME(){return bu}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=zt(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(g.off(this._config.target,vr),g.on(this._config.target,vr,Xn,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return;continue}!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=C.find(Xn,this._config.target);for(const n of t){if(!n.hash||Wt(n))continue;const i=C.findOne(decodeURI(n.hash),this._element);Ne(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(me),this._activateParents(t),g.trigger(this._element,wu,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Tu)){C.findOne(Du,t.closest(Nu)).classList.add(me);return}for(const n of C.parents(t,Ou))for(const i of C.prev(n,Lu))i.classList.add(me)}_clearActiveClass(t){t.classList.remove(me);const n=C.find(`${Xn}.${me}`,t);for(const i of n)i.classList.remove(me)}static jQueryInterface(t){return this.each(function(){const n=Dn.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}g.on(window,Au,()=>{for(const e of C.find(Su))Dn.getOrCreateInstance(e)});Et(Dn);const ku="tab",Iu="bs.tab",ae=`.${Iu}`,Pu=`hide${ae}`,Ru=`hidden${ae}`,ju=`show${ae}`,Hu=`shown${ae}`,Bu=`click${ae}`,zu=`keydown${ae}`,Wu=`load${ae}`,Gu="ArrowLeft",Er="ArrowRight",Vu="ArrowUp",yr="ArrowDown",Qn="Home",wr="End",Zt="active",Ar="fade",Jn="show",Fu="dropdown",Ls=".dropdown-toggle",Uu=".dropdown-menu",Zn=`:not(${Ls})`,Ku='.list-group, .nav, [role="tablist"]',Yu=".nav-item, .list-group-item",qu=`.nav-link${Zn}, .list-group-item${Zn}, [role="tab"]${Zn}`,Ns='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ti=`${qu}, ${Ns}`,Xu=`.${Zt}[data-bs-toggle="tab"], .${Zt}[data-bs-toggle="pill"], .${Zt}[data-bs-toggle="list"]`;class xe extends At{constructor(t){super(t),this._parent=this._element.closest(Ku),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),g.on(this._element,zu,n=>this._keydown(n)))}static get NAME(){return ku}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),i=n?g.trigger(n,Pu,{relatedTarget:t}):null;g.trigger(t,ju,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Zt),this._activate(C.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Jn);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),g.trigger(t,Hu,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(Ar))}_deactivate(t,n){if(!t)return;t.classList.remove(Zt),t.blur(),this._deactivate(C.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Jn);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),g.trigger(t,Ru,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(Ar))}_keydown(t){if(![Gu,Er,Vu,yr,Qn,wr].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(r=>!Wt(r));let i;if([Qn,wr].includes(t.key))i=n[t.key===Qn?0:n.length-1];else{const r=[Er,yr].includes(t.key);i=xi(n,t.target,r,!0)}i&&(i.focus({preventScroll:!0}),xe.getOrCreateInstance(i).show())}_getChildren(){return C.find(ti,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",n),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=C.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const i=this._getOuterElement(t);if(!i.classList.contains(Fu))return;const r=(s,o)=>{const a=C.findOne(s,i);a&&a.classList.toggle(o,n)};r(Ls,Zt),r(Uu,Jn),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,i){t.hasAttribute(n)||t.setAttribute(n,i)}_elemIsActive(t){return t.classList.contains(Zt)}_getInnerElement(t){return t.matches(ti)?t:C.findOne(ti,t)}_getOuterElement(t){return t.closest(Yu)||t}static jQueryInterface(t){return this.each(function(){const n=xe.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}g.on(document,Bu,Ns,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!Wt(this)&&xe.getOrCreateInstance(this).show()});g.on(window,Wu,()=>{for(const e of C.find(Xu))xe.getOrCreateInstance(e)});Et(xe);const Qu="toast",Ju="bs.toast",Kt=`.${Ju}`,Zu=`mouseover${Kt}`,td=`mouseout${Kt}`,ed=`focusin${Kt}`,nd=`focusout${Kt}`,id=`hide${Kt}`,rd=`hidden${Kt}`,sd=`show${Kt}`,od=`shown${Kt}`,ad="fade",Tr="hide",fn="show",hn="showing",cd={animation:"boolean",autohide:"boolean",delay:"number"},ld={animation:!0,autohide:!0,delay:5e3};class $n extends At{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ld}static get DefaultType(){return cd}static get NAME(){return Qu}show(){if(g.trigger(this._element,sd).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(ad);const n=()=>{this._element.classList.remove(hn),g.trigger(this._element,od),this._maybeScheduleHide()};this._element.classList.remove(Tr),Ue(this._element),this._element.classList.add(fn,hn),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||g.trigger(this._element,id).defaultPrevented)return;const n=()=>{this._element.classList.add(Tr),this._element.classList.remove(hn,fn),g.trigger(this._element,rd)};this._element.classList.add(hn),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(fn),super.dispose()}isShown(){return this._element.classList.contains(fn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){g.on(this._element,Zu,t=>this._onInteraction(t,!0)),g.on(this._element,td,t=>this._onInteraction(t,!1)),g.on(this._element,ed,t=>this._onInteraction(t,!0)),g.on(this._element,nd,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=$n.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}xn($n);Et($n);function _n(e){var r,s,o,a;const t=wt();function n(){document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(h=>{const d=Vt.getInstance(h);d&&d.dispose()})}n(),t.innerHTML=`
    <div class="container mt-4">
      <h2 class="text-center mb-4">状态</h2>

      <div class="row">
        <!-- 装备栏区域 -->
        <div class="col-md-6 mb-4">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">${e.name} 的装备</h4>
            </div>
            <div class="card-body">
              <div id="equipment-bar" class="list-group">
                ${Object.entries(e.equipments).map(([c,h])=>`
                  <div id="equipment-slot-${c}" class="list-group-item">
                    <div class="d-flex align-items-center gap-2">
                      <span class="fw-bold">${c}</span>
                      ${h?`<span class="badge bg-${vn(h.rarity)}" data-bs-toggle="tooltip" data-bs-html="true" data-bs-placement="top" title="${zi(h).replace(/"/g,"&quot;")}">${h.name}</span>`:'<span class="badge bg-secondary">空</span>'}
                    </div>
                  </div>
                `).join("")}
              </div>
            </div>
          </div>
        </div>

        <!-- 背包区域 -->
        <div class="col-md-6 mb-4">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">${e.name} 的背包</h4>
            </div>
            <div class="card-body">
              <div id="pack" class="d-flex flex-wrap gap-2">
                ${e.pack.length>0?e.pack.map(c=>{const h=`btn-${vn(c.rarity)}`,d=c instanceof Be||c instanceof ne?zi(c):c.description;return`<button id="use-btn${c.uuid}" class="btn ${h}" data-bs-toggle="tooltip" data-bs-html="true" data-bs-placement="top" title="${d.replace(/"/g,"&quot;")}">${Js(c)}${c.name}</button>`}).join(""):'<p class="text-muted">背包为空</p>'}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 宠物区域 -->
      <div class="row mb-4">
        <div class="col">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">${e.name} 的宠物</h4>
            </div>
            <div class="card-body">
              <div id="pet" class="list-group">
                ${e.capturedMonster.length>0?e.capturedMonster.map(c=>`
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                          <span class="fw-bold">${c.name}</span>
                          <span class="text-muted">Lv. ${c.level}</span>
                        </div>
                      `).join(""):'<p class="text-muted">暂无宠物</p>'}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 返回主菜单按钮 -->
      <div class="text-center">
        <button id="back-btn" class="btn btn-primary">返回主菜单</button>
      </div>
    </div>
  `,(r=document.getElementById("back-btn"))==null||r.addEventListener("click",()=>{Mn(e)});for(const c of e.pack)c instanceof Be&&((s=document.getElementById(`use-btn${c.uuid}`))==null||s.addEventListener("click",()=>{c.useItem(e),e.addLog(`${e.name} 使用了 ${c.name}`),Bt(e),_n(e)})),c instanceof ne&&((o=document.getElementById(`use-btn${c.uuid}`))==null||o.addEventListener("click",()=>{e.wearEquipment(c),Bt(e),_n(e)}));for(const[c,h]of Object.entries(e.equipments))h&&((a=document.getElementById(`equipment-slot-${c}`))==null||a.addEventListener("click",()=>{e.removeEquipment(h.position),Bt(e),_n(e)}));Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(c=>{new Vt(c,{placement:"top",html:!0})})}function Mn(e){var n,i,r;const t=wt();e.isAtHome=!0,Bt(e),console.log(e),t.innerHTML=`
    <!-- 顶部区域：显示血条和玩家信息 -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <!-- 血条区域 -->
        <div id="health-display" class="mb-3">
          ${e.getHealthDisplay()}
        </div>
        <!-- 玩家信息区域 -->
        <div class="text-center">
          <h2 class="card-title mb-1">
            <span class="badge bg-${e.type===ut.Player114514?"danger":"primary"} ms-2" style="font-size: 0.75rem; padding: 0.35em 0.5em;">
              ${e.type===ut.Player114514?"野兽":"人类"}
            </span>
            ${e.name}
            <small class="text-muted"> lv ${e.level}</small>
          </h2>
          <!-- 经验条 -->
          <div id="exp-display" class="mt-2" style="max-width: 200px; margin: 0 auto;">
            ${e.getExpDisplay()}
          </div>
        </div>

        <!-- 玩家形象区域 -->
        <div class="text-center mt-3">
          <img src=${to} alt="玩家形象" class="img-fluid" style="max-height: 200px;">
        </div>
      </div>
    </div>

    <!-- 主菜单区域：用 mt-auto 自动向下推 -->
    <div class="mt-auto">
      <div class="row g-3 justify-content-center">
        <div class="col-12 col-md-4">
          <button id="battle-btn" class="btn btn-primary w-100 py-3">
            ${e.type===ut.Player114514?"救世啊！":"战斗"}
          </button>
        </div>
        <div class="col-12 col-md-4">
          <button id="status-btn" class="btn btn-success w-100 py-3">状态</button>
        </div>
        <div class="col-12 col-md-4">
          <button id="restart-btn" class="btn btn-danger w-100 py-3">秽土转生</button>
        </div>
      </div>

      <!-- 查看记录按钮 -->
      <div class="text-center mt-4">
        <button class="btn btn-info" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
          查看记录
        </button>
      </div>
    </div>

    <!-- Offcanvas 记录面板 -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel">记录</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="关闭"></button>
      </div>
      <div class="offcanvas-body">
        <div style="max-height: 60vh; overflow-y: auto;">
          <p>${e.getLastNLog(100)}</p>
        </div>
      </div>
    </div>

    <!-- 底部区域：占位 -->
    <div class="mt-auto">
    </div>
  `,(n=document.getElementById("battle-btn"))==null||n.addEventListener("click",()=>{e.isAtHome=!1,co(e)}),(i=document.getElementById("status-btn"))==null||i.addEventListener("click",()=>{_n(e)}),(r=document.getElementById("restart-btn"))==null||r.addEventListener("click",()=>{window.confirm("你确定要 remake 吗？")&&(localStorage.clear(),window.location.reload())})}function ud(){var t,n;const e=wt();e.innerHTML=`
    <h1>你是谁？</h1>
    <div class="row mb-4">
      <div class="col-6">
        <div class="card bg-primary text-white" id="action1-btn" style="cursor: pointer;">
          <div class="card-body text-center">
            <h5 class="card-title">普通人</h5>
            <p class="card-text">"野兽先辈是什么？"</p>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="card bg-info text-white" id="action2-btn" style="cursor: pointer;">
          <div class="card-body text-center">
            <h5 class="card-title">野兽仙贝</h5>
            <p class="card-text">伟大的古希腊哲学家田所曾这样警醒后人：逸一时，误一世。(如果一时放纵自己，贪图安逸，就可能误了一生的前程) 现在，你将扮演这位伟大的贤人。好时代，来临罢！</p>
            </div>
        </div>
      </div>
    </div>
  `,(t=document.getElementById("action1-btn"))==null||t.addEventListener("click",()=>{const i=new ye("吴田所",ut.Player);ri(i),fi(i)}),(n=document.getElementById("action2-btn"))==null||n.addEventListener("click",()=>{const i=new ye("田所",ut.Player114514);ri(i);const r=new pi("远野",ut.Toono,1,1);i.isAtHome=!1,bn(i,r,null,null,(s,o,a)=>{a?dd(s):fd(s)})})}function dd(e){var n;const t=wt();t.innerHTML=`
    <h1>野兽宅</h1>
    <p>距离击败远野已不知过去了多久，但一切都还历历在目。<p>
    <p>你感到痛心疾首，为什么事情会变成这样，为什么亲密无间的两人会反目成仇。<p>
    <p>你不再沉沦，高呼道：伊已逝，吾亦逝。忆旧已久罢忆灵！(你逝去了，而我的心也逝去了，空留肉体如行尸走肉般存活。我已经缅怀故人多时，罢了罢了，现在是时候了！)</p>
		<p>你闭上了眼睛。</p>
    <button id="continue-btn">继续</button>
  `,(n=document.getElementById("continue-btn"))==null||n.addEventListener("click",()=>{Mi(e)})}function fd(e){var n;const t=wt();t.innerHTML=`
    <h1>野兽宅</h1>
    <p>你被远野击败了。<p>
    <p>你感到痛心疾首，为什么事情会变成这样，为什么亲密无间的两人会反目成仇。<p>
    <p>你愤怒地将手指向远野，不甘心地嘶吼：你是一个一个一个一个，呐，哼哼，啊啊啊啊啊啊啊！！！<p>
    <p>但是意识逐渐模糊，你最终还是倒下了。<p>
    <button id="continue-btn">继续</button>
  `,(n=document.getElementById("continue-btn"))==null||n.addEventListener("click",()=>{e.health=e.maxHealth*.8,Mi(e)})}function fi(e){var r,s;const t=wt(),n=Math.floor(Math.random()*4);let i="";switch(n){case 0:i="<p>车 →→→ 你</p>";break;case 1:i="<p>你 ←←← 车</p>";break;case 2:i=`
      <p style="text-align: center;">  车</p>
      <p style="text-align: center;">  ↓</p>
      <p style="text-align: center;">  你</p>`;break;case 3:i=`
      <p style="text-align: center;">  你</p>
      <p style="text-align: center;">  ↑</p>
      <p style="text-align: center;">  车</p>`;break}t.innerHTML=`
  <h1>躲避大卡车</h1>
  <p>一辆卡车正在向你快速驶来，请选择躲避方向</p>
  ${i}
  <button id="left-btn">向左躲避</button>
  <button id="right-btn">向右躲避</button>
`,(r=document.getElementById("left-btn"))==null||r.addEventListener("click",()=>{Math.random()>.3?fi(e):Sr(e)}),(s=document.getElementById("right-btn"))==null||s.addEventListener("click",()=>{Math.random()>.3?fi(e):Sr(e)})}function Sr(e){var n;const t=wt();t.innerHTML=`
    <h1>躲避大卡车</h1>
    <p>躲避失败，你嗝屁了</p>
    <button id="continue-btn">继续</button>
  `,(n=document.getElementById("continue-btn"))==null||n.addEventListener("click",()=>{Mi(e)})}function Mi(e){var n;const t=wt();t.innerHTML=`
    <h1>???</h1>
    <p>请输入你的名字</p>
    <input type="text" id="name-input" placeholder="${e.name}">
    <button id="continue-btn">继续</button>
  `,(n=document.getElementById("continue-btn"))==null||n.addEventListener("click",()=>{const r=document.getElementById("name-input").value.trim();r?(e.name=r,hd(e)):alert("请输入你的名字！")})}function hd(e){var n;const t=wt();t.innerHTML=`
    <h1>???</h1>
    <p>你睁开了眼睛，发现自己好像身处森林之中</p>
    <p>周围的一切都显得那么陌生，充满了异世界风情</p>
    <p>看着远处地上缓慢蠕动的史莱姆，你总算相信自己穿越了</p>
    <button id="continue-btn">继续</button>
  `,(n=document.getElementById("continue-btn"))==null||n.addEventListener("click",()=>{Bt(e),Mn(e)})}document.addEventListener("DOMContentLoaded",()=>{let e;try{e=Qs()}catch(t){console.log(t),localStorage.clear(),ud();return}Mn(e)});
